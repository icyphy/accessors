<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test Page for REST accessor using httpClient module </title>
    <link rel="stylesheet" type="text/css" href="/accessors/hosts/browser/accessorStyle.css">
    <script>
        // Define initial values for accessor inputs.  Do so here vs. in the accessor
        //  definition since they're specific to this scenario.  Wait until page
        //  has loaded so that form fields exist.   
 	    var initialValues = {};
        initialValues["REST.options"] = "{\"method\" : \"POST\", \"url\" : \"http://localhost:8088\"}";
        initialValues["REST.command"] = "test";
        initialValues["REST.trigger"] = true;
        initialValues["REST.body"] = "{\"test\" : \"this is a test\"}";
    </script>
    
    <!-- Load browser.js, if not already loaded.  The TerraSwarm website automatically loads browser.js.
	     To check if loaded, look for one of the global functions defined by browser.js - here, generate() -->
    <script>
    	if (typeof generate === "undefined") {
    		function loadScript(callback) {
        		var browserScript = document.createElement('script');
        		browserScript.src = '/accessors/hosts/browser/browser.js';
        		
        	    // Different browsers have different loading events - bind to all.
        	    browserScript.onreadystatechange = callback;
        	    browserScript.onload = callback;
        	    
                var head = document.getElementsByTagName('head')[0];
                head.appendChild(browserScript);
    		}
    		
    		loadScript(function callGenerate() {
    			generate();
    		});
    	}
    </script>
</head>
<body>
<div>
If you do not see an accessor below, then see the
<a href="/accessors/hosts/browser/test/index.html">instructions for running a browser host</a>.
<hr>
<p> Enter options below: </p>

<p> POST test </p>
<ul> <li> options: {"method" : "POST", "url" : "http://localhost:8088"} </li>
	 <li> command: test </li>
     <li> trigger: true </li>
     <li> body: {"test" : "this is a test"} </li>
</ul>
<p> then click "react to inputs".  The output should be: </p>
<ul> <li> response: "Request info: {\"method\":\"POST\"}, Request body: test=this+is+a+test" </li>
	 <li> status: Type string, Value 200: OK </li>
</ul>

<p> PUT test </p>
<ul> <li> options: {"method" : "PUT", "url" : "http://localhost:8088"} </li>
	 <li> command: test </li>
     <li> trigger: true </li>
     <li> body: {"test" : "this is a test"} </li>
</ul>
<p> then click "react to inputs".  The output should be: </p>
<ul> <li> response: "Request info: {\"method\":\"PUT\"}, Request body: test=this+is+a+test" </li>
	 <li> status: Type string, Value 200: OK </li>
</ul>

<p> GET the value that was PUT </p> 
<ul> <li> options: "http://localhost:8088/" </li>
	 <li> command: test </li>	
     <li> trigger: true </li>
</ul>
<p> then click "react to inputs".  The output should be: </p>
<ul> <li> response: "test=this+is+a+test" </li>
	 <li> status: Type string, Value 200: OK </li>
</ul>

</div>
<hr>
<div class="accessor"
   src="net/REST"
   id="REST"></div>
</body>
</html>