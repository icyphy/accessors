exports.setup = function () {
    //  This composite accessor was created by Cape Code.
    //  To run the code, run: 
    //  (cd $PTII/org/terraswarm/accessor/accessors/web/services/test/auto; node ../../../hosts/node/nodeHostInvoke.js services/test/auto/GeoCoderWeather)
    //  To regenerate this composite accessor, run:
    //  $PTII/bin/ptinvoke ptolemy.cg.kernel.generic.accessor.AccessorCodeGenerator -language accessor $PTII/ptolemy/actor/lib/jjs/modules/httpClient/test/auto/GeoCoderWeather.xml
    //  to edit the model, run:
    //  $PTII/bin/capecode $PTII/ptolemy/actor/lib/jjs/modules/httpClient/test/auto/GeoCoderWeather.xml

    // Ports: GeoCoderWeather: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/TypedCompositeActor.java

    // Start: JavaScriptConst: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptConst = this.instantiateFromCode('JavaScriptConst', unescape('/**%20Output%20a%20const%0A%20*%0A%20*%20%20@accessor%20test/Const%0A%20*%20%20@input%20trigger%20The%20trigger%0A%20*%20%20@output%20output%20The%20output%0A%20*%20%20@param%20step%20The%20amount%20by%20which%20the%20output%20is%20incremented.%20The%0A%20*%20%20default%20is%201.%0A%20*%20%20@author%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20GeoCoderWeather.xml%2076643%202017-08-15%2014%3A01%3A39Z%20cxh%20%24%24%0A%20*/%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%20%20%20%20this.output%28%27output%27%29%3B%0A%7D%3B%0A%0Aexports.fire%20%3D%20function%28%29%20%7B%0A%09var%20value%20%3D%20%22Berkeley%2C%20CA%22%3B%0A%20%20%20%20this.send%28%27output%27%2C%20value%29%3B%0A%7D%3B'));

    // Start: TestSpontaneousOnce: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TestSpontaneousOnce: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TestSpontaneousOnce = this.instantiateFromCode('TestSpontaneousOnce', unescape('//%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once.%0A//%0A//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A%0A/**%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A%20*%20%20This%20implementation%20produces%20a%20counting%20sequence.%0A%20*%0A%20*%20%20@accessor%20test/TestSpontaneousOnce%0A%20*%20%20@parameter%20delay%20The%20delay%20in%20milliseconds%20before%20the%20value%20is%20outputk.%0A%20*%20%20@parameter%20value%20The%20value%20to%20be%20output%20after%20the%20delay.%0A%20*%20%20@output%20output%20The%20output%20port%0A%20*%20%20@author%20Christopher%20Brooks%20and%20Edward%20A.%20Lee.%20Based%20on%20TestSpontaneous%20by%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20GeoCoderWeather.xml%2076643%202017-08-15%2014%3A01%3A39Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20clearTimeout%2C%20console%2C%20error%2C%20exports%2C%20require%2C%20setTimeout%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27delay%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%201000%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27value%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20true%0A%20%20%20%20%7D%29%3B%20%0A%20%20%20%20this.output%28%27output%27%29%3B%0A%7D%3B%0A%0A//%20These%20variables%20will%20not%20be%20visible%20to%20subclasses.%0Avar%20handle%20%3D%20null%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20Need%20to%20record%20%27this%27%20for%20use%20in%20the%20callback.%0A%20%20%20%20var%20thiz%20%3D%20this%3B%0A%20%20%20%20handle%20%3D%20setTimeout%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20thiz.send%28%27output%27%2C%20thiz.getParameter%28%27value%27%29%29%3B%0A%20%20%20%20%7D%2C%20this.getParameter%28%27delay%27%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28handle%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28handle%29%3B%0A%20%20%20%20%20%20%20%20handle%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    TestSpontaneousOnce.setParameter('delay', 1000.0);
    TestSpontaneousOnce.setParameter('value', true);

    // Start: TrainableTest: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TrainableTest: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TrainableTest = this.instantiateFromCode('TrainableTest', unescape('//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A/**%20Compare%20the%20input%20with%20a%20known%20good%20input.%0A%20*%20%20If%20you%20set%20%27%27trainingMode%27%27%20to%20true%20and%20provide%20inputs%2C%20then%20the%0A%20*%20%20inputs%20will%20be%20recorded%20in%20the%20%27%27correctValues%27%27%20parameters.%0A%20*%20%20Otherwise%2C%20the%20inputs%20will%20be%20compared%20against%20those%20in%20the%0A%20*%20%20%27%27correctValue%27%27%20parameter.%0A%20*%0A%20*%20%20@accessor%20test/TrainableTest%0A%20*%20%20@input%20input%20The%20input%20value.%0A%20*%20%20@output%20output%20False%20as%20long%20as%20there%20is%20data%20to%20compare%20against%20the%20input%0A%20*%20%20@param%20correctValues%20a%20JSON%20array%20of%20the%20correct%20values.%0A%20*%20%20@param%20trainingMode%20true%20if%20the%20input%20is%20being%20trained.%0A%20*%20%20@author%20Christopher%20Brooks%20based%20on%20the%20Ptolemy%20NonStrictTest%20actor%20by%20Paul%20Whitaker%2C%20Christopher%20Hylands%2C%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20GeoCoderWeather.xml%2076643%202017-08-15%2014%3A01%3A39Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20console%2C%20exports*/%0A/*jshint%20globalstrict%3A%20true*/%0A/*jslint%20plusplus%3A%20true%20*/%0A%27use%20strict%27%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27correctValues%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%5B0%5D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27input%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27tolerance%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200.000000001%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27trainingMode%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20false%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A//%20Input%2C%20parameter%20and%20variable%20names%20match%20those%20in%20%24PTII/ptolemy/actor/lib/NonStrictTest.java%0A%0A//%20Set%20to%20true%20if%20an%20input%20is%20handled.%20%20If%20no%20inputs%20are%20handled%2C%20then%0A//%20throw%20an%20exception%20in%20wrapup%28%29.%0Avar%20inputHandled%20%3D%20false%3B%0A%0A//%20Set%20to%20true%20when%20initialize%28%29%20is%20called.%0Avar%20initialized%20%3D%20false%3B%0A%0A//%20The%20number%20of%20input%20tokens%20that%20have%20been%20read%20in.%0Avar%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A//%20If%20trainingMode%20is%20true%2C%20then%20inputs%20that%20have%20been%20seen%20so%20far.%0Avar%20trainingTokens%20%3D%20%5B%5D%3B%0A%0A//%20Set%20to%20false%20in%20initialize%28%29%20and%20true%20at%20the%20end%20of%20wrapup%28%29.%0A//%20FIXME%3A%20We%20should%20have%20an%20exit%20hook%20that%20checks%20that%20wrapup%28%29%20is%20called%20for%20all%20the%20actors.%0Avar%20wrappedUp%20%3D%20false%3B%0A%0A//%20So%20we%20can%20test%20this%20in%20hosts/node/test/mocha/testMain.js%20to%20test%20that%20wrapup%20was%20called.%0Aexports.wrappedUp%20%3D%20wrappedUp%3B%0A%0A/**%20Create%20an%20input%20handler%20to%20compare%20the%20input%20with%20the%20appropriate%20element%28s%29%0A%20*%20%20from%20correctValues.%0A%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//console.log%28%22Test%20initialize%28%29%3A%20typeof%20correctValues%3A%20%22%20+%20typeof%20this.getParameter%28%27correctValues%27%29%29%0A%20%20%20%20var%20inputValueValue%2C%0A%20%20%20%20%20%20%20%20self%20%3D%20this%3B%0A%0A%20%20%20%20trainingTokens%20%3D%20%5B%5D%3B%0A%20%20%20%20exports.wrappedUp%20%3D%20false%3B%0A%20%20%20%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A%20%20%20%20this.addInputHandler%28%27input%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20cache%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20%3D%20self.get%28%27input%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%3B%0A%20%20%20%20%20%20%20%20inputHandled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20//%20If%20the%20input%20is%20not%20connected%2C%20then%20inputValue%20will%20be%20null.%0A%20%20%20%20%20%20%20%20if%20%28self.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20trainingTokens.push%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20self.getParameter%28%27correctValues%27%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceToken%20%3D%20correctValuesValues%5BnumberOfInputTokensSeen%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//console.log%28%22Test%3A%20%22%20+%20numberOfInputTokensSeen%20+%20%22%2C%20input%3A%20%22%20+%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20//+%20%22%2C%20referenceToken%3A%20%22%20+%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%20%26%26%20typeof%20inputValue%20%21%3D%3D%20%27string%27%20%26%26%20typeof%20inputValue%20%21%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20value%20of%20the%20input%20was%20null%3F%20%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Perhaps%20the%20input%20is%20not%20connected%3F%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20neither%20a%20number%20nor%20a%20string%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27%20with%20value%20%27%20+%20inputValueValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20the%20input%20not%20a%20number%2C%20then%20throw%20an%20error.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20the%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27.%20%20The%20expected%20value%20was%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20difference%20%3D%20Math.abs%28inputValue%20-%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isNaN%28difference%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20absolute%20value%20of%20the%20input%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20+%20%27%22%20-%20the%20referenceToken%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%20is%20NaN%3F%20%20It%20should%20be%20less%20than%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28difference%20%3E%20self.getParameter%28%27tolerance%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20not%20within%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20of%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20devices/test/auto/WatchEmulator.js%20needs%20this%20test%20for%20object%20because%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20we%20receive%20a%20JSON%20object%2C%20then%20we%20should%20try%20to%20stringify%20it.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22.%20%20The%20input%20was%20an%20object%2C%20and%20a%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValueValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22.%20%20The%20input%20was%20an%20object%20and%20JSON.stringify%28%29%20did%20not%20throw%20an%20exception.%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27A%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceTokenValue%20%3D%20JSON.stringify%28referenceToken%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20comparing%20longs%20from%20CapeCode%2C%20then%20the%20values%20will%20be%20like%20%221L%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20and%20stringify%20will%20return%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceToken%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceTokenValue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20inputValueValue%20could%20still%20be%20undefined%20here%20if%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20was%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20undefined%20%26%26%20inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%21%3D%3D%20undefined%20%26%26%20referenceTokenValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceTokenValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Deal%20with%20referenceTokens%20with%20value%201L.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValueValue%20%21%3D%3D%20%27object%27%20%7C%7C%20typeof%20referenceTokenValue%20%21%3D%3D%20%27object%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue.toString%28%29%20%21%3D%3D%20referenceTokenValue.toString%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20%21%3D%3D%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20+%20%27%22%20typeof%20inputValueValue%3A%20%27%20+%20typeof%20inputValueValue%20+%20%27%20typeof%20referenceTokenValue%3A%20%27%20+%20typeof%20referenceTokenValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20referenceToken%20%22%27%20+%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20past%20the%20end%20of%20the%20expected%20inputs%2C%20then%20read%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3E%3D%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20initialized%20%3D%20true%3B%0A%7D%3B%0A%0A/**%20If%20trainingMode%20is%20true%2C%20then%20updated%20the%20correctValues.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28this.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20this.setParameter%28%27correctValues%27%2C%20trainingTokens%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28initialized%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21inputHandled%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20input%20handler%20of%20this%20accessor%20was%20never%20invoked.%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Usually%2C%20this%20is%20an%20error%20indicating%20that%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27starvation%20is%20occurring.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20this.getParameter%28%27correctValues%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20test%20produced%20only%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20yet%20the%20correctValues%20parameter%20was%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27expecting%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20correctValuesValues.length%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20name%20%3D%20this.accessorName%3B%0A%0A%20%20%20%20//%20FIXME%3A%20Should%20we%20check%20to%20see%20if%20the%20name%20has%20no%20dots%20in%20and%20if%0A%20%20%20%20//%20it%20does%20not%2C%20add%20the%20container%20name%3F%0A%0A%20%20%20%20//if%20%28this.container%29%20%7B%0A%20%20%20%20//%20%20%20%20name%20%3D%20this.container.accessorName%20+%20%22.%22%20+%20name%3B%0A%20%20%20%20//%7D%0A%0A%20%20%20%20//%0A%20%20%20%20exports.wrappedUp%20%3D%20true%3B%0A%20%20%20%20//%20console.log%28%22TrainableTest.js%3A%20wrapup%28%29%20finished%3A%20%22%20+%20name%20+%20%22%2C%20exports.wrappedUp%3A%20%22%20+%20exports.wrappedUp%29%3B%0A%0A%7D%3B%0A'));
    TrainableTest.setParameter('trainingMode', false);
    TrainableTest.setParameter('correctValues', [70.5]);
    TrainableTest.setParameter('tolerance', 50.0);

    // Start: JavaScriptGetTemperature: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptGetTemperature = this.instantiateFromCode('JavaScriptGetTemperature', unescape('//%20Send%20the%20value%20of%20the%20temperature%20field.%0A%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20this.input%28%27input%27%2C%20%7B%27type%27%3A%20%27JSON%27%7D%29%3B%0A%20%20%20%20this.output%28%27temperature%27%2C%20%7B%27type%27%3A%20%27number%27%7D%29%3B%0A%7D%3B%0A%0Avar%20handle%20%3D%20null%3B%0A%0Aexports.initialize%20%3D%20function%28%29%20%7B%0A%09var%20self%20%3D%20this%3B%0A%09%0A%09handle%20%3D%20this.addInputHandler%28%27input%27%2C%20function%20%28%29%20%7B%0A%09%09var%20json%20%3D%20this.get%28%27input%27%29%3B%0A%09%09self.send%28%27temperature%27%2C%20json.temperature%29%3B%0A%09%7D%29%3B%0A%7D%0A%0Aexports.wrapup%20%3D%20function%28%29%20%7B%0A%20%20%20%20if%20%28handle%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20this.removeInputHandler%28handle%29%3B%0A%20%20%20%20%7D%0A%7D%3B'));

    // Start: Stop: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: Stop: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var Stop = this.instantiateFromCode('Stop', unescape('//%20Accessor%20that%20stops%20execution%20of%20the%20enclosing%20swarmlet.%0A//%0A//%20Copyright%20%28c%29%202016-2016%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Accessor%20that%20stops%20execution%20of%20the%20enclosing%20swarmlet%20when%20it%0A%20*%20%20receives%20an%20input%20with%20value%20true.%20It%20does%20this%20by%20identifying%0A%20*%20%20the%20top-level%20enclosing%20composite%20accessor%20and%20invoking%20wrapup%0A%20*%20%20on%20it.%0A%20*%0A%20*%20%20@accessor%20utilities/Stop%0A%20*%20%20@input%20%7Bboolean%7D%20stop%20A%20signal%20with%20value%20true%20to%20stop%20the%20swarmlet.%0A%20*%20%20@author%20Edward%20A.%20Lee%20%28eal@eecs.berkeley.edu%29%0A%20*%20%20@version%20%24%24Id%3A%20GeoCoderWeather.xml%2076643%202017-08-15%2014%3A01%3A39Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*global%20%20exports%2C%20require%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.input%28%27stop%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.addInputHandler%28%27stop%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20stop%20%3D%20this.get%28%27stop%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28stop%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.stop%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A'));

    // Start: GeoCoder: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: GeoCoder: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var GeoCoder = this.instantiateFromCode('GeoCoder', unescape('//%20Copyright%20%28c%29%202015-2016%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Retrieve%20a%20location%20given%20an%20address.%0A%20*%20%20The%20location%20is%20given%20as%20an%20object%20with%20two%20numeric%20fields%2C%0A%20*%20%20%22latitude%22%20and%20%22longitude%22.%20For%20example%2C%0A%20*%20%20%60%7B%22latitude%22%3A%2037.85%2C%20%22longitude%22%3A%20-122.26%7D%60%20is%0A%20*%20%20the%20location%20of%20Berkeley%2C%20California.%0A%20*%0A%20*%20%20This%20accessor%20requires%20a%20%22key%22%20for%20the%20Google%20Geocoding%20API%2C%20which%20you%20can%0A%20*%20%20obtain%20for%20free%20at%20https%3A//developers.google.com/maps/documentation/geocoding/intro%20.%0A%20*%0A%20*%20%20This%20accessor%20looks%20for%20key%20in%20%24KEYSTORE/geoCoderKey%2C%20which%0A%20*%20%20resolves%20to%20%24HOME/.ptKeystore/geoCoderKey.%0A%20*%0A%20*%20%20This%20accessor%20does%20not%20block%20waiting%20for%20the%20response%2C%20but%20if%20any%20additional%0A%20*%20%20*address*%20input%20is%20received%20before%20a%20pending%20request%20has%20received%20a%20response%0A%20*%20%20or%20timed%20out%2C%20then%20the%20new%20request%20will%20be%20queued%20and%20sent%20out%20only%20after%0A%20*%20%20the%20pending%20request%20has%20completed.%20This%20strategy%20ensures%20that%20outputs%20are%0A%20*%20%20produced%20in%20the%20same%20order%20as%20the%20input%20requests.%0A%20*%0A%20*%20%20@accessor%20services/GeoCoder%0A%20*%20%20@input%20%7Bstring%7D%20address%20The%20address%2C%20for%20example%20%22Berkeley%2C%20CA%22.%0A%20*%20%20@output%20location%20The%20location%2C%20as%20an%20object%20with%20a%20%27latitude%27%20and%20%27longitude%27%0A%20*%20%20%20property.%0A%20*%20%20@output%20response%20An%20object%20containing%20the%20location%20information.%0A%20*%20%20@author%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20GeoCoderWeather.xml%2076643%202017-08-15%2014%3A01%3A39Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20addInputHandler%2C%20console%2C%20get%2C%20getParameter%2C%20getResource%2C%20error%2C%20exports%2C%20extend%2C%20get%2C%20input%2C%20output%2C%20parameter%2C%20require%2C%20send%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%27use%20strict%27%3B%0A%0A/**%20Set%20up%20the%20accessor%20by%20defining%20the%20inputs%20and%20outputs.%0A%20*/%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.extend%28%27net/REST%27%29%3B%0A%20%20%20%20this.input%28%27address%27%29%3B%0A%20%20%20%20this.output%28%27location%27%29%3B%0A%0A%20%20%20%20//%20Change%20default%20values%20of%20the%20base%20class%20inputs.%0A%20%20%20%20//%20Also%2C%20hide%20base%20class%20inputs%2C%20except%20trigger.%0A%20%20%20%20//%20Note%20the%20need%20for%20quotation%20marks%20on%20the%20options%20parameter.%0A%20%20%20%20this.input%28%27options%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27%7B%22url%22%3A%20%22https%3A//maps.googleapis.com%22%7D%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27command%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27maps/api/geocode/json%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20//%20NOTE%3A%20The%20value%20can%20be%20given%20as%20a%20JSON%20string%20or%20a%20JavaScript%20object.%0A%20%20%20%20this.input%28%27arguments%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22address%22%3A%20%22Berkeley%2C%20CA%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22key%22%3A%20%22Enter%20Key%20Here%22%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27body%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27headers%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27status%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27outputCompleteResponseOnly%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20Be%20sure%20to%20call%20the%20superclass%20so%20that%20the%20trigger%20input%20handler%20gets%20registered.%0A%20%20%20%20exports.ssuper.initialize.call%28this%29%3B%0A%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20//%20Handle%20location%20information.%0A%20%20%20%20this.addInputHandler%28%27address%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20address%20%3D%20this.get%28%27address%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28address%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20The%20key%20from%20https%3A//developers.google.com/maps/documentation/geocoding/intro%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20key%20%3D%20%27%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20See%20the%20accessor%20comment%20for%20how%20to%20get%20the%20key.%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20keyFile%20%3D%20%27%24KEYSTORE/geoCoderKey%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20getResource%28keyFile%2C%201000%29.trim%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27GeoCoder.js%3A%20Could%20not%20get%20%27%20+%20keyFile%20+%20%22%3A%20%20%22%20+%20e%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%5CnThe%20key%20is%20not%20public%2C%20so%20this%20accessor%20is%20only%20useful%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27If%20you%20have%20the%20key.%20%20See%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27https%3A//www.icyphy.org/accessors/library/index.html%3Faccessor%3Dservices.GeoCoder%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20%27ThisIsNotAPipeNorIsItAWorkingKeySeeTheGeoCoderAccessorDocs%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20console.log%28%27GeoCoder%3A%20address%3A%20%27%20+%20address%20+%20%27%20key%3A%20%27%20+%20key%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20arguments%20is%20a%20reserved%20word%2C%20so%20we%20use%20args.%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27address%27%3A%20address%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27key%27%3A%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27arguments%27%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27trigger%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20%27GeoCoder%3A%20No%20address.%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A/**%20Filter%20the%20response%2C%20extracting%20the%20latitude%20and%20longitude%20and%0A%20*%20%20formatting.%0A%20*/%0Aexports.filterResponse%20%3D%20function%20%28response%29%20%7B%0A%20%20%20%20if%20%28response%29%20%7B%0A%20%20%20%20%20%20%20%20//%20Note%20that%20for%20some%20hosts%2C%20the%20response%20is%20a%20string%2C%20needing%20to%20parsed%2C%0A%20%20%20%20%20%20%20%20//%20and%20for%20some%2C%20its%20already%20been%20parsed.%0A%20%20%20%20%20%20%20%20var%20parsed%20%3D%20response%3B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20parsed%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parsed%20%3D%20JSON.parse%28response%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20error%28%27GeoCoder%3A%20Unable%20to%20parse%20response%3A%20%27%20+%20err.message%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%5CnResponse%20was%3A%20%27%20+%20response%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20So%20that%20downstream%20actors%20don%27t%20just%20a%20previous%20location%2C%20send%20null.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.send%28%27location%27%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20//%20NOTE%3A%20All%20of%20the%20following%20should%20be%20replaced%20with%20a%20generic%0A%20%20%20%20%20%20%20%20//%20schema%20transformation%20utility.%0A%20%20%20%20%20%20%20%20//%20FIXME%3A%20Just%20taking%20the%20first%20result%20if%20there%20are%20multiple%20matches.%0A%20%20%20%20%20%20%20%20if%20%28parsed.results%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.results%5B0%5D%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.results%5B0%5D.geometry%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.results%5B0%5D.geometry.location%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.results%5B0%5D.geometry.location.lat%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.results%5B0%5D.geometry.location.lng%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.send%28%27location%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22latitude%22%3A%20parsed.results%5B0%5D.geometry.location.lat%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22longitude%22%3A%20parsed.results%5B0%5D.geometry.location.lng%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20error%28%27GeoCoder%3A%20No%20matching%20location.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20So%20that%20downstream%20actors%20don%27t%20just%20a%20previous%20location%2C%20send%20null.%0A%20%20%20%20%20%20%20%20%20%20%20%20this.send%28%27location%27%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20response%3B%0A%7D%3B%0A'));
    GeoCoder.setDefault('options', {"url": "https://maps.googleapis.com"});
    GeoCoder.setDefault('command', "maps/api/geocode/json");
    GeoCoder.setDefault('arguments', {"address":"Berkeley, CA","key":"Enter Key Here"});
    GeoCoder.setParameter('timeout', 10000);
    GeoCoder.setParameter('outputCompleteResponseOnly', true);

    // Start: Weather: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: Weather: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var Weather = this.instantiateFromCode('Weather', unescape('//%20Copyright%20%28c%29%202015-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Retrieve%20weather%20information%20for%20a%20given%20location%20using%0A%20*%20%20http%3A//openweathermap.org%20.%0A%20*%20%20The%20location%20input%20is%20given%20as%20an%20object%20with%20two%20numeric%20fields%2C%0A%20*%20%20%22latitude%22%20and%20%22longitude%22.%20The%20default%20is%0A%20*%20%20%60%7B%22latitude%22%3A%2037.85%2C%20%22longitude%22%3A%20-122.26%7D%60%2C%20which%20is%0A%20*%20%20the%20location%20of%20Berkeley%2C%20California.%0A%20*%0A%20*%20%20This%20accessor%20requires%20a%20key%20for%20the%20API%2C%20which%20you%20can%0A%20*%20%20obtain%20for%20free%20at%20http%3A//openweathermap.org/appid%20.%0A%20*%0A%20*%20%20This%20accessor%20looks%20for%20key%20in%20%24KEYSTORE/weatherKey%2C%20which%0A%20*%20%20resolves%20to%20%24HOME/.ptKeystore/weatherKey.%0A%20*%0A%20*%20%20This%20accessor%20does%20not%20block%20waiting%20for%20the%20response%2C%20but%20if%20any%20additional%0A%20*%20%20*location*%20input%20is%20received%20before%20a%20pending%20request%20has%20received%20a%20response%0A%20*%20%20or%20timed%20out%2C%20then%20the%20new%20request%20will%20be%20queued%20and%20sent%20out%20only%20after%0A%20*%20%20the%20pending%20request%20has%20completed.%20This%20strategy%20ensures%20that%20outputs%20are%0A%20*%20%20produced%20in%20the%20same%20order%20as%20the%20input%20requests.%0A%20*%0A%20*%20%20@accessor%20services/Weather%0A%20*%20%20@author%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20GeoCoderWeather.xml%2076643%202017-08-15%2014%3A01%3A39Z%20cxh%20%24%24%0A%20*%20%20@input%20location%20The%20location%2C%20an%20object%20with%20two%20fields%20%28default%20is%20Berkeley%29.%0A%20*%20%20@parameter%20%7Bstring%7D%20temperature%20One%20of%20%27Fahrenheit%27%2C%20%27Celsius%27%2C%20or%20%27Kelvin%27.%0A%20*%20%20@output%20response%20An%20object%20containing%20the%20raw%20response%20from%20the%20service.%0A%20*%20%20@output%20weather%20An%20object%20containing%20more%20readable%20weather%20data.%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20addInputHandler%2C%20addInputParameter%2C%20console%2C%20error%2C%20exports%2C%20extend%2C%20input%2C%20get%2C%20getParameter%2C%20getResource%2C%20output%2C%20parameter%2C%20send%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%27use%20strict%27%3B%0A%0A/**%20Set%20up%20the%20accessor%20by%20defining%20the%20inputs%20and%20outputs.%0A%20*/%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.extend%28%27net/REST%27%29%3B%0A%20%20%20%20this.input%28%27location%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22latitude%22%3A%2037.85%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22longitude%22%3A%20-122.26%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27weather%27%29%3B%0A%20%20%20%20this.parameter%28%27temperature%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27options%27%3A%20%5B%27Fahrenheit%27%2C%20%27Celsius%27%2C%20%27Kelvin%27%5D%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27Fahrenheit%27%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20//%20Change%20default%20values%20of%20the%20base%20class%20inputs.%0A%20%20%20%20//%20Also%2C%20hide%20base%20class%20inputs%2C%20except%20trigger.%0A%20%20%20%20this.input%28%27options%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27%7B%20%22url%22%3A%20%22http%3A//api.openweathermap.org%22%7D%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27command%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27/data/2.5/weather%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27arguments%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%2C%0A%20%20%20%20%20%20%20%20%27key%27%3A%20%27Enter%20Key%20Here%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27%7B%22lat%22%3A37.85%2C%20%22lon%22%3A-122.26%2C%20%22key%22%3A%22Set%20%7E/.ptkeystore/weatherKey%22%7D%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27body%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27headers%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27status%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27outputCompleteResponseOnly%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27visibility%27%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A/**%20Convert%20the%20temperature%20in%20kelvins%20to%20the%20units%20specified%20in%20the%0A%20*%20%20temperature%20parameter.%20Also%2C%20round%20the%20result%20to%20a%20precision%20of%0A%20*%20%200.01%20degrees.%0A%20*%20%20@param%20kelvin%20The%20temperature%20in%20degrees%20Kelvin.%0A%20*%20%20@param%20units%20The%20units%20to%20convert%20to%2C%20one%20of%20%27Fahrenheit%27%20or%20%27Celsius%27.%0A%20*%20%20@return%20The%20temperature%20in%20the%20desired%20units.%0A%20*/%0Avar%20convertTemperature%20%3D%20function%20%28kelvin%2C%20units%29%20%7B%0A%20%20%20%20var%20result%20%3D%20kelvin%3B%0A%20%20%20%20if%20%28units%20%3D%3D%20%27Fahrenheit%27%29%20%7B%0A%20%20%20%20%20%20%20%20result%20%3D%20%28kelvin%20-%20273.15%29%20*%201.8%20+%2032.00%3B%0A%20%20%20%20%7D%20else%20if%20%28units%20%3D%3D%20%27Celsius%27%29%20%7B%0A%20%20%20%20%20%20%20%20result%20%3D%20kelvin%20-%20273.15%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%28Math.round%28result%20*%20100%29%20/%20100%29%3B%0A%7D%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20Be%20sure%20to%20call%20the%20superclass%20so%20that%20the%20trigger%20input%20handler%20gets%20registered.%0A%20%20%20%20exports.ssuper.initialize.call%28this%29%3B%0A%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20//%20Handle%20location%20information.%0A%20%20%20%20this.addInputHandler%28%27location%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20location%20%3D%20this.get%28%27location%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28location%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20typeof%20location.latitude%20%3D%3D%3D%20%27number%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20typeof%20location.longitude%20%3D%3D%3D%20%27number%27%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20The%20key%20from%20http%3A//openweathermap.org/appid%20that%20should%20be%20placed%20in%20%24HOME/.ptKeystore/weatherKey.%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20key%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20See%20the%20accessor%20comment%20for%20how%20to%20get%20the%20key.%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20keyFile%20%3D%20%27%24KEYSTORE/weatherKey%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20getResource%28keyFile%2C%201000%29.trim%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27Weather.js%3A%20Could%20not%20get%20%27%20+%20keyFile%20+%20%22%3A%20%20%22%20+%20e%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%5CnThe%20key%20is%20not%20public%2C%20so%20this%20accessor%20is%20only%20useful%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27If%20you%20have%20the%20key.%20%20See%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27https%3A//www.icyphy.org/accessors/library/index.html%3Faccessor%3Dservices.Weather%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20%27ThisIsNotAPipeNorIsItAWorkingKeySeeTheGeoCoderAccessorDocs%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20console.log%28%27Weather%3A%20lat%3A%20%27%20+%20location.latitude%20+%20%27%2C%20lon%3A%20%27%20+%20location.longitude%20+%20%27%2C%20key%3A%20%27%20+%20key%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20reformatted%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27lat%27%3A%20location.latitude%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27lon%27%3A%20location.longitude%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27APPID%27%3A%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27arguments%27%2C%20reformatted%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27trigger%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28location%20%3D%3D%20-null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20error%28%27Weather%3A%20No%20location%20information.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20error%28%27Weather%3A%20Malformed%20location%3A%20%27%20+%20location%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%5CnExpecting%20%7B%22latitude%22%3Anumber%2C%20%22longitude%22%3Anumber%7D%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27weather%27%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A/**%20Filter%20the%20response%2C%20extracting%20the%20weather%20information%20and%0A%20*%20%20outputting%20it%20on%20the%20weather%20output.%20The%20full%20response%20is%20produced%0A%20*%20%20on%20the%20%27response%27%20output.%0A%20*/%0Aexports.filterResponse%20%3D%20function%20%28response%29%20%7B%0A%20%20%20%20//%20console.log%28%27Weather.js%20filterResponse%28%27%20+%20response%29%3B%0A%20%20%20%20//%20console.log%28response%29%3B%0A%20%20%20%20if%20%28response%29%20%7B%0A%20%20%20%20%20%20%20%20//%20Note%20that%20for%20some%20hosts%2C%20the%20response%20is%20a%20string%2C%20needing%20to%20parsed%2C%0A%20%20%20%20%20%20%20%20//%20and%20for%20some%2C%20its%20already%20been%20parsed.%0A%20%20%20%20%20%20%20%20var%20parsed%20%3D%20response%3B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20parsed%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parsed%20%3D%20JSON.parse%28response%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20error%28%27Weather%3A%20Unable%20to%20parse%20response%3A%20%27%20+%20err.message%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%5CnResponse%20was%3A%20%27%20+%20response%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20So%20that%20downstream%20actors%20don%27t%20just%20a%20previous%20location%2C%20send%20null.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.send%28%27weather%27%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20weather%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20//%20Look%20for%20a%20description%20field.%0A%20%20%20%20%20%20%20%20if%20%28parsed.weather%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20Array.isArray%28parsed.weather%29%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.weather%5B0%5D%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20parsed.weather%5B0%5D.description%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20weather.description%20%3D%20parsed.weather%5B0%5D.description%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28parsed.main%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.temp%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather.temperature%20%3D%20convertTemperature%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parsed.main.temp%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.getParameter%28%27temperature%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.pressure%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27pressure%20%28hPa%29%27%5D%20%3D%20parsed.main.pressure%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.humidity%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27humidity%20%28percent%29%27%5D%20%3D%20parsed.main.humidity%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.temp_min%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27minimum%20temperature%27%5D%20%3D%20convertTemperature%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parsed.main.temp_min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.getParameter%28%27temperature%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.temp_max%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27maximum%20temperature%27%5D%20%3D%20convertTemperature%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parsed.main.temp_max%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.getParameter%28%27temperature%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.wind%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.wind.speed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27wind%20speed%20%28meters/second%29%27%5D%20%3D%20parsed.main.wind.speed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.main.wind.deg%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20deg%20%3D%20parsed.main.wind.deg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20directions%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22North%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22North%20Northeast%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Northeast%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22East%20Northeast%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22East%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22East%20Southeast%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Southeast%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22South%20Southeast%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22South%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22South%20Southwest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Southwest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22West%20Southwest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22West%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22West%20Northwest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Northwest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22North%20Northwest%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20index%20%3D%20Math.floor%28%28%28deg%20+%2011.25%29%20%25%20360%29%20/%2022.5%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27wind%20direction%27%5D%20%3D%20directions%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28parsed.name%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weather%5B%27place%20name%27%5D%20%3D%20parsed.name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.send%28%27weather%27%2C%20weather%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20response%3B%0A%7D%3B%0A'));
    Weather.setDefault('options', { "url": "http://api.openweathermap.org"});
    Weather.setDefault('command', "/data/2.5/weather");
    Weather.setDefault('arguments', {"lat":37.85, "lon":-122.26, "key":"Set ~/.ptkeystore/weatherKey"});
    Weather.setParameter('temperature', "Fahrenheit");
    Weather.setDefault('location', {"latitude":37.85,"longitude":-122.26});
    Weather.setParameter('timeout', 10000);
    Weather.setParameter('outputCompleteResponseOnly', true);

    // Connections: GeoCoderWeather: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/TypedCompositeActor.java
    this.connect(TestSpontaneousOnce, 'output', JavaScriptConst, 'trigger');
    this.connect(JavaScriptGetTemperature, 'temperature', TrainableTest, 'input');
    this.connect(Weather, 'weather', JavaScriptGetTemperature, 'input');
    this.connect(TrainableTest, 'output', Stop, 'stop');
    this.connect(JavaScriptConst, 'output', GeoCoder, 'address');
    this.connect(GeoCoder, 'location', Weather, 'location');
};

// To update the initialize code below, modify
//   $PTII/ptolemy/cg/kernel/generic/accessor/AccessorCodeGenerator.java
if (exports.initialize) {
    var originalInitialize = exports.initialize;
    exports.initialize = function() {
        originalInitialize.call(this);
        this.stopAt(18000.0);
    }
} else {
    exports.initialize = function() {
        this.stopAt(18000.0);
    }
}
