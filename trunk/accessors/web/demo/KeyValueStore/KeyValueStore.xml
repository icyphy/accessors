<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="KeyValueStore" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="10.0.devel">
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="localClock" class="ptolemy.actor.LocalClock">
            <property name="globalTimeResolution" class="ptolemy.actor.parameters.SharedParameter" value="1E-6">
            </property>
        </property>
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[695.0, 300.0]">
        </property>
    </property>
    <property name="WebServer" class="org.ptolemy.ptango.lib.WebServer">
        <property name="preferredPort" class="ptolemy.data.expr.Parameter" value="8077">
        </property>
        <property name="applicationPath" class="ptolemy.data.expr.StringParameter" value="/keyvalue">
        </property>
        <property name="resourceLocation" class="ptolemy.data.expr.FileParameter" value="">
        </property>
        <property name="port" class="ptolemy.data.expr.Parameter" value="8077">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[805.0, 320.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 22, 1280, 774}, maximized=true}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1046, 664]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.025060407317915">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{501.33607219827525, 587.4391837284484}">
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model launches a web server and provides a service&#10;available at http://localhost:8077/keyvalue that stores key-value pairs.&#10;&#10;To get a help screen (HTML):&#10;   http://localhost:8077/keyvalue/help&#10;To store a value, use&#10;   http://localhost:8077/keyvalue/set?id=MY_ID&amp;value=MY_VALUE&#10;To retrieve the value, use&#10;   http://localhost:8077/keyvalue/get?id=MY_ID&#10;To remove a value, use&#10;   http://localhost:8077/keyvalue/delete?id=MY_ID&#10;To list all keys (a JSON array of strings), use&#10;   http://localhost:8077/keyvalue/list&#10;&#10;You may also store a value by sending a UDP (datagram) packet to&#10;localhost:8076. If the packet is formatted as above,&#10;set?id=MY_ID&amp;value=MY_VALUE, then it will store the value indexed by the&#10;specified ID. Otherwise, the packet will be stored as a string indexed by the&#10;IP address of the sender. You can retrieve the string using &quot;get&quot; as above,&#10;where MY_ID is replaced with the IP address.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[630.0, 360.0]">
        </property>
    </property>
    <property name="enableBackwardTypeInference" class="ptolemy.data.expr.Parameter" value="true">
    </property>
    <property name="CatchExceptionAttribute" class="ptolemy.actor.lib.CatchExceptionAttribute">
        <property name="policy" class="ptolemy.data.expr.StringParameter" value="throw">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="statusMessage">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[965.0, 300.0]">
        </property>
    </property>
    <property name="_layoutConfiguration" class="ptolemy.vergil.basic.layout.LayoutConfiguration">
        <property name="includeDecorations" class="ptolemy.data.expr.Parameter" value="false">
            <display name="Include decorations"/>
        </property>
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="FIXME: enable restart!!!">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[880.0, 325.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="If a key is not found,&#10;the response is an&#10;empty string.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 395.0]">
        </property>
    </property>
    <entity name="HttpActor" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/set">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{110.0, 410.0}">
        </property>
    </entity>
    <entity name="MicrostepDelay2" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 295.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{485.0, 490.0}">
        </property>
        <port name="setResponse" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
        <port name="set" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="{id=string, value=string}">
            </property>
        </port>
        <port name="get" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="{id=string}">
            </property>
        </port>
        <port name="getResponse" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
        <port name="delete" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="{id=string}">
            </property>
        </port>
        <port name="deleteResponse" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
        <port name="datagramAddress" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
        </port>
        <port name="datagram" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
        </port>
        <port name="list" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="listResponse" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={77, 29, 1286, 841}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1052, 730]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.5748737153762586">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{227.8201761914136, 400.72516470455747}">
            </property>
            <port name="setResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[474.44308675782713, 310.00001192408945]">
                </property>
            </port>
            <port name="set" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-90.0, 305.0]">
                </property>
            </port>
            <port name="get" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-90.0, 345.0]">
                </property>
            </port>
            <port name="getResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[474.44308675782713, 355.00001192408945]">
                </property>
            </port>
            <port name="delete" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-90.0, 385.0]">
                </property>
            </port>
            <port name="deleteResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[474.44308675782713, 400.00001192408945]">
                </property>
            </port>
            <port name="datagramAddress" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-90.0, 505.0]">
                </property>
            </port>
            <port name="datagram" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-90.0, 465.0]">
                </property>
            </port>
            <port name="list" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-90.0, 425.0]">
                </property>
            </port>
            <port name="listResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[474.44308675782713, 440.00001192408945]">
                </property>
            </port>
            <entity name="listen" class="ptolemy.domains.modal.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="write">
                </property>
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 285.0]">
                </property>
            </entity>
            <entity name="error" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 385.0]">
                </property>
            </entity>
            <entity name="response1" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 455.0]">
                </property>
            </entity>
            <entity name="response2" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[230.0, 455.0]">
                </property>
            </entity>
            <entity name="responding" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[165.0, 195.0]">
                </property>
            </entity>
            <entity name="response3" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[230.0, 385.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="set_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setResponse&#10;  =&quot;Error: &quot; + errorMessage">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.5760843554671148">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.570452444348797">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="history" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="error" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="set_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setResponse&#10;  =&quot;Set &quot; + set.toString()">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.9487528943632">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.5928170703667324">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    <display name="default"/>
                </property>
                <property name="history" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="delete_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="deleteResponse = &quot;Removed &quot; + delete.id">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.8037720825867295">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.2930224149762337">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    <display name="default"/>
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="history" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="get_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="getResponse&#10;  = &quot;Error: &quot; + errorMessage">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.5760973842643443">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.29550305056911264">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="error" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="delete_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="deleteResponse&#10;  = &quot;Error: &quot; + errorMessage">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.5519926952787086">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.9693743479626833">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="history" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="error" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.20228462761538016">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.1265028110062834">
                </property>
                <property name="error" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.5312665100641599">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.0628895973267358">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="true">
                    <display name="default"/>
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation8" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.20508304616772727">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.30322735490219044">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="true">
                    <display name="default"/>
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation9" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.01893868957642593">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.184323504892281">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="true">
                    <display name="default"/>
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="history" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation10" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="&#10;delete_isPresent">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.5416989449801316">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.6250575561595546">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="true">
                    <display name="default"/>
                </property>
            </relation>
            <relation name="relation11" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.2868282748011431">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.6433021156967353">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="true">
                    <display name="default"/>
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="history" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation12" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="list_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="listResponse&#10;  = &quot;The store is empty&quot;">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.43603205598075845">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.6203922753927955">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation13" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.500188988537882">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.7155850297265307">
                </property>
                <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="true">
                    <display name="default"/>
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <link port="listen.incomingPort" relation="relation3"/>
            <link port="listen.incomingPort" relation="relation5"/>
            <link port="listen.incomingPort" relation="relation9"/>
            <link port="listen.incomingPort" relation="relation11"/>
            <link port="listen.outgoingPort" relation="relation2"/>
            <link port="listen.outgoingPort" relation="relation6"/>
            <link port="listen.outgoingPort" relation="relation10"/>
            <link port="error.incomingPort" relation="relation6"/>
            <link port="error.outgoingPort" relation="relation"/>
            <link port="error.outgoingPort" relation="relation7"/>
            <link port="response1.incomingPort" relation="relation"/>
            <link port="response1.incomingPort" relation="relation7"/>
            <link port="response1.outgoingPort" relation="relation4"/>
            <link port="response1.outgoingPort" relation="relation8"/>
            <link port="response2.incomingPort" relation="relation4"/>
            <link port="response2.incomingPort" relation="relation8"/>
            <link port="response2.outgoingPort" relation="relation12"/>
            <link port="response2.outgoingPort" relation="relation13"/>
            <link port="responding.incomingPort" relation="relation2"/>
            <link port="responding.incomingPort" relation="relation10"/>
            <link port="responding.outgoingPort" relation="relation3"/>
            <link port="responding.outgoingPort" relation="relation11"/>
            <link port="response3.incomingPort" relation="relation12"/>
            <link port="response3.incomingPort" relation="relation13"/>
            <link port="response3.outgoingPort" relation="relation5"/>
            <link port="response3.outgoingPort" relation="relation9"/>
        </entity>
        <entity name="write" class="ptolemy.domains.modal.modal.Refinement">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={166, 22, 1274, 856}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1040, 746]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.2863850910465784">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{482.34667968749994, 481.5065609830098}">
            </property>
            <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{135.0, 225.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="If a key is not found,&#10;the response is an&#10;empty string.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 495.0]">
                </property>
            </property>
            <port name="setResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{230.0, 220.0}">
                </property>
            </port>
            <port name="set" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{170.0, 430.0}">
                </property>
            </port>
            <port name="get" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{320.0, 295.0}">
                </property>
            </port>
            <port name="getResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[870.0, 430.0]">
                </property>
            </port>
            <port name="delete" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{160.0, 535.0}">
                </property>
            </port>
            <port name="deleteResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{335.0, 220.0}">
                </property>
            </port>
            <port name="datagramAddress" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{95.0, 600.0}">
                </property>
            </port>
            <port name="datagram" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{290.0, 355.0}">
                </property>
            </port>
            <port name="list" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{490.0, 665.0}">
                </property>
            </port>
            <port name="listResponse" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{825.0, 355.0}">
                </property>
            </port>
            <entity name="Dictionary" class="ptolemy.actor.lib.Dictionary">
                <property name="file" class="ptolemy.data.expr.FileParameter" value="KeyValueStoreData.txt">
                </property>
                <property name="updateFile" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="loggingDirectory" class="ptolemy.data.expr.FileParameter" value="$HOME/logs">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 435.0}">
                </property>
            </entity>
            <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{210.0, 410.0}">
                </property>
                <port name="id" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="value" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="RecordDisassembler2" class="ptolemy.actor.lib.RecordDisassembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{380.0, 275.0}">
                </property>
                <port name="id" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="RecordDisassembler3" class="ptolemy.actor.lib.RecordDisassembler">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{205.0, 515.0}">
                </property>
                <port name="id" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{420.0, 540.0}">
                </property>
            </entity>
            <entity name="Merge2" class="ptolemy.domains.de.lib.Merge">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{420.0, 445.0}">
                </property>
            </entity>
            <entity name="FileWriter" class="ptolemy.actor.lib.FileWriter">
                <doc>Write an entire file from a string</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{430.0, 610.0}">
                </property>
            </entity>
            <entity name="TokenToJSON" class="ptolemy.actor.lib.conversions.json.TokenToJSON">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{735.0, 355.0}">
                </property>
            </entity>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="result.isNil() ? &quot;&quot; : result">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                    <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{755, 480}">
                </property>
                <port name="result" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;get._location&quot;,x=320.0,y=295.0}, tail={id=&quot;RecordDisassembler2.input&quot;,x=380.0,y=275.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;Dictionary.readKey&quot;,x=610.0,y=435.0}, tail={id=&quot;RecordDisassembler2.id&quot;,x=380.0,y=275.0}, points={515.0,415.0,515.0,295.0} } }">
                </property>
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;set._location&quot;,x=170.0,y=430.0}, tail={id=&quot;RecordDisassembler.input&quot;,x=210.0,y=410.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;delete._location&quot;,x=160.0,y=535.0}, tail={id=&quot;RecordDisassembler3.input&quot;,x=205.0,y=515.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;RecordDisassembler.id&quot;,x=210.0,y=410.0}, tail={id=&quot;Merge.input&quot;,x=420.0,y=540.0,index=3}, points={345.0,420.0,345.0,530.0} } }">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;RecordDisassembler3.id&quot;,x=205.0,y=515.0}, tail={id=&quot;Merge.input&quot;,x=420.0,y=540.0,index=3}, points={} } }">
                </property>
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;Dictionary.writeKey&quot;,x=610.0,y=435.0}, tail={id=&quot;Merge.output&quot;,x=420.0,y=540.0}, points={515.0,455.0,515.0,540.0} } }">
                </property>
            </relation>
            <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;RecordDisassembler.value&quot;,x=210.0,y=410.0}, tail={id=&quot;Merge2.input&quot;,x=420.0,y=445.0,index=2}, points={} } }">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;Dictionary.value&quot;,x=610.0,y=435.0}, tail={id=&quot;Merge2.output&quot;,x=420.0,y=445.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;datagram._location&quot;,x=290.0,y=355.0}, tail={id=&quot;Merge2.input&quot;,x=420.0,y=445.0,index=2}, points={360.0,355.0,360.0,445.0} } }">
                </property>
            </relation>
            <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="{345.0, 600.0}">
                </vertex>
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;FileWriter.input&quot;,x=430.0,y=610.0}, tail={id=&quot;relation13.vertex1&quot;,x=345.0,y=600.0}, points={} },{ head={id=&quot;Merge.input&quot;,x=420.0,y=540.0,index=3}, tail={id=&quot;relation13.vertex1&quot;,x=345.0,y=600.0}, points={345.0,540.0} },{ head={id=&quot;datagramAddress._location&quot;,x=95.0,y=600.0}, tail={id=&quot;relation13.vertex1&quot;,x=345.0,y=600.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;list._location&quot;,x=490.0,y=665.0}, tail={id=&quot;Dictionary.triggerKeys&quot;,x=610.0,y=435.0}, points={610.0,665.0} } }">
                </property>
            </relation>
            <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;TokenToJSON.input&quot;,x=735.0,y=355.0}, tail={id=&quot;Dictionary.keys&quot;,x=610.0,y=435.0}, points={700.0,355.0,700.0,425.0} } }">
                </property>
            </relation>
            <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.basic.layout.kieler.LayoutHint" value="{ { head={id=&quot;listResponse._location&quot;,x=825.0,y=355.0}, tail={id=&quot;TokenToJSON.output&quot;,x=735.0,y=355.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="set" relation="relation6"/>
            <link port="get" relation="relation"/>
            <link port="getResponse" relation="relation16"/>
            <link port="delete" relation="relation7"/>
            <link port="datagramAddress" relation="relation13"/>
            <link port="datagram" relation="relation11"/>
            <link port="list" relation="relation14"/>
            <link port="listResponse" relation="relation12"/>
            <link port="Dictionary.keys" relation="relation15"/>
            <link port="Dictionary.readKey" relation="relation5"/>
            <link port="Dictionary.result" relation="relation4"/>
            <link port="Dictionary.triggerKeys" relation="relation14"/>
            <link port="Dictionary.value" relation="relation3"/>
            <link port="Dictionary.writeKey" relation="relation9"/>
            <link port="RecordDisassembler.input" relation="relation6"/>
            <link port="RecordDisassembler.id" relation="relation8"/>
            <link port="RecordDisassembler.value" relation="relation10"/>
            <link port="RecordDisassembler2.input" relation="relation"/>
            <link port="RecordDisassembler2.id" relation="relation5"/>
            <link port="RecordDisassembler3.input" relation="relation7"/>
            <link port="RecordDisassembler3.id" relation="relation2"/>
            <link port="Merge.input" relation="relation8"/>
            <link port="Merge.input" relation="relation2"/>
            <link port="Merge.input" relation="relation13"/>
            <link port="Merge.output" relation="relation9"/>
            <link port="Merge2.input" relation="relation10"/>
            <link port="Merge2.input" relation="relation11"/>
            <link port="Merge2.output" relation="relation3"/>
            <link port="FileWriter.input" relation="relation13"/>
            <link port="TokenToJSON.input" relation="relation15"/>
            <link port="TokenToJSON.output" relation="relation12"/>
            <link port="Expression.output" relation="relation16"/>
            <link port="Expression.result" relation="relation4"/>
        </entity>
        <relation name="setResponseRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="setRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="getRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="getResponseRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="deleteRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="deleteResponseRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="datagramAddressRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="datagramRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="listRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="listResponseRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <link port="setResponse" relation="setResponseRelation"/>
        <link port="set" relation="setRelation"/>
        <link port="get" relation="getRelation"/>
        <link port="getResponse" relation="getResponseRelation"/>
        <link port="delete" relation="deleteRelation"/>
        <link port="deleteResponse" relation="deleteResponseRelation"/>
        <link port="datagramAddress" relation="datagramAddressRelation"/>
        <link port="datagram" relation="datagramRelation"/>
        <link port="list" relation="listRelation"/>
        <link port="listResponse" relation="listResponseRelation"/>
        <link port="_Controller.setResponse" relation="setResponseRelation"/>
        <link port="_Controller.set" relation="setRelation"/>
        <link port="_Controller.get" relation="getRelation"/>
        <link port="_Controller.getResponse" relation="getResponseRelation"/>
        <link port="_Controller.delete" relation="deleteRelation"/>
        <link port="_Controller.deleteResponse" relation="deleteResponseRelation"/>
        <link port="_Controller.datagramAddress" relation="datagramAddressRelation"/>
        <link port="_Controller.datagram" relation="datagramRelation"/>
        <link port="_Controller.list" relation="listRelation"/>
        <link port="_Controller.listResponse" relation="listResponseRelation"/>
        <link port="write.setResponse" relation="setResponseRelation"/>
        <link port="write.set" relation="setRelation"/>
        <link port="write.get" relation="getRelation"/>
        <link port="write.getResponse" relation="getResponseRelation"/>
        <link port="write.delete" relation="deleteRelation"/>
        <link port="write.deleteResponse" relation="deleteResponseRelation"/>
        <link port="write.datagramAddress" relation="datagramAddressRelation"/>
        <link port="write.datagram" relation="datagramRelation"/>
        <link port="write.list" relation="listRelation"/>
        <link port="write.listResponse" relation="listResponseRelation"/>
    </entity>
    <entity name="HttpActor2" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/get">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{110.0, 500.0}">
        </property>
    </entity>
    <entity name="MicrostepDelay" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{280.0, 345.0}">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="HttpActor3" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/delete">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{110.0, 715.0}">
        </property>
    </entity>
    <entity name="MicrostepDelay3" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 985.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="DatagramReader" class="ptolemy.actor.lib.net.DatagramReader">
        <property name="localSocketNumber" class="ptolemy.data.expr.Parameter" value="8076">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{90.0, 820.0}">
        </property>
        <port name="returnAddress" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="returnSocketNumber" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="UnsignedByteArrayToString" class="ptolemy.actor.lib.conversions.UnsignedByteArrayToString">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{160.0, 880.0}">
        </property>
    </entity>
    <entity name="HttpActor4" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/list">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{110.0, 630.0}">
        </property>
    </entity>
    <entity name="MicrostepDelay4" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 930.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="HttpActor5" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/help">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{745.0, 955.0}">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="MicrostepDelay5" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{875.0, 945.0}">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="StringConst" class="ptolemy.actor.lib.StringConst">
        <property name="value" class="ptolemy.data.expr.Parameter" value="&lt;html&gt;&lt;body&gt;&lt;h1&gt;Key-Value Store Service&lt;/h1&gt;&lt;p&gt;&#10;This server and provides a key-value store service.&#10;You can store data indexed by a key and retrieve it as follows:&#10;&lt;/p&gt;&#10;&lt;ul&gt;&lt;li&gt; To get a help screen (HTML):&lt;pre&gt;&#10;   http://ptango.eecs.berkeley.edu:8077/keyvalue/help&#10;&lt;/pre&gt;&lt;/li&gt;&lt;li&gt;To store a value with key MY_ID and value MY_VALUE, use&lt;pre&gt;&#10;   http://ptango.eecs.berkeley.edu:8077/keyvalue/set?id=MY_ID&amp;value=MY_VALUE&#10;&lt;/pre&gt;&lt;/li&gt;&lt;li&gt;To retrieve the value, use&lt;pre&gt;&#10;   http://ptango.eecs.berkeley.edu:8077/keyvalue/get?id=MY_ID&#10;&lt;/pre&gt;&lt;/li&gt;&lt;li&gt;To remove a value, use&lt;pre&gt;&#10;   http://ptango.eecs.berkeley.edu:8077/keyvalue/delete?id=MY_ID&#10;&lt;/pre&gt;&lt;/li&gt;&lt;li&gt;To list all keys (a JSON array of strings), use&lt;pre&gt;&#10;   http://ptango.eecs.berkeley.edu:8077/keyvalue/list&#10;&lt;/pre&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&#10;You may also store a value by sending a UDP (datagram) packet to&#10;localhost:8076. If the packet is formatted as above,&#10;set?id=MY_ID&amp;value=MY_VALUE, then it will store the value indexed by the&#10;specified ID. Otherwise, the packet will be stored as a string indexed by the&#10;IP address of the sender. You can retrieve the string using &quot;get&quot; as above,&#10;where MY_ID is replaced with the IP address.&#10;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                </property>
            </property>
        </property>
        <doc>Create a constant sequence with a string value.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="80">
            </property>
            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{895.0, 815.0}">
        </property>
    </entity>
    <entity name="JavaScript" class="ptolemy.actor.lib.js.JavaScript">
        <property name="script" class="ptolemy.kernel.util.StringAttribute" value="function fire() {&#10;  var trimmed = get(input).trim();&#10;  if (trimmed.match(&quot;^set?&quot;)) {&#10;    var command = trimmed.substring(4);&#10;    var split = command.split(&quot;&amp;&quot;);&#10;    if (split.length == 2) {&#10;      var idpart = split[0].split(&quot;=&quot;);&#10;      if (idpart.length == 2 &amp;&amp; idpart[0].trim() == &quot;id&quot;) {&#10;        var valuepart = split[1].split(&quot;=&quot;);&#10;        if (valuepart.length == 2 &amp;&amp; valuepart[0].trim() == &quot;value&quot;) {&#10;          send(idpart[1], id);&#10;          send(valuepart[1], value);&#10;          return;&#10;        }&#10;      }&#10;    }&#10;  }&#10;  // Not a valid set?id=name&amp;value=val command.&#10;  // Use the returnAddress as an ID and the payload as a value.&#10;  send(get(returnAddress), id);&#10;  send(get(input), value);&#10;}">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="16">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="initialize" class="ptolemy.kernel.util.Attribute">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="8">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="wrapup" class="ptolemy.kernel.util.Attribute">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="8">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{335.0, 820.0}">
        </property>
        <port name="returnAddress" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="id" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="value" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation13" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation14" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation16" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation17" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation18" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation19" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation20" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation21" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[540.0, 930.0]">
        </vertex>
    </relation>
    <relation name="relation15" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[555.0, 985.0]">
        </vertex>
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[540.0, 295.0]">
        </vertex>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[555.0, 345.0]">
        </vertex>
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[280.0, 500.0]">
        </vertex>
    </relation>
    <link port="HttpActor.response" relation="relation6"/>
    <link port="HttpActor.getParameters" relation="relation4"/>
    <link port="MicrostepDelay2.input" relation="relation9"/>
    <link port="MicrostepDelay2.output" relation="relation6"/>
    <link port="ModalModel.setResponse" relation="relation9"/>
    <link port="ModalModel.set" relation="relation4"/>
    <link port="ModalModel.get" relation="relation"/>
    <link port="ModalModel.getResponse" relation="relation5"/>
    <link port="ModalModel.delete" relation="relation3"/>
    <link port="ModalModel.deleteResponse" relation="relation15"/>
    <link port="ModalModel.datagramAddress" relation="relation10"/>
    <link port="ModalModel.datagram" relation="relation20"/>
    <link port="ModalModel.list" relation="relation13"/>
    <link port="ModalModel.listResponse" relation="relation21"/>
    <link port="HttpActor2.response" relation="relation2"/>
    <link port="HttpActor2.getParameters" relation="relation"/>
    <link port="MicrostepDelay.input" relation="relation5"/>
    <link port="MicrostepDelay.output" relation="relation2"/>
    <link port="HttpActor3.response" relation="relation7"/>
    <link port="HttpActor3.getParameters" relation="relation3"/>
    <link port="MicrostepDelay3.input" relation="relation15"/>
    <link port="MicrostepDelay3.output" relation="relation7"/>
    <link port="DatagramReader.returnAddress" relation="relation19"/>
    <link port="DatagramReader.output" relation="relation12"/>
    <link port="UnsignedByteArrayToString.input" relation="relation12"/>
    <link port="UnsignedByteArrayToString.output" relation="relation11"/>
    <link port="HttpActor4.response" relation="relation14"/>
    <link port="HttpActor4.getRequestURI" relation="relation13"/>
    <link port="MicrostepDelay4.input" relation="relation21"/>
    <link port="MicrostepDelay4.output" relation="relation14"/>
    <link port="HttpActor5.response" relation="relation17"/>
    <link port="HttpActor5.getRequestURI" relation="relation16"/>
    <link port="MicrostepDelay5.input" relation="relation18"/>
    <link port="MicrostepDelay5.output" relation="relation17"/>
    <link port="StringConst.output" relation="relation18"/>
    <link port="StringConst.trigger" relation="relation16"/>
    <link port="JavaScript.returnAddress" relation="relation19"/>
    <link port="JavaScript.input" relation="relation11"/>
    <link port="JavaScript.id" relation="relation10"/>
    <link port="JavaScript.value" relation="relation20"/>
</entity>
