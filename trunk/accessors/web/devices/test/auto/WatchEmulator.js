exports.setup = function () {
    //  This composite accessor was created by Cape Code.
    //  To run the code, run: 
    //  (cd $PTII/org/terraswarm/accessor/accessors/web/devices/test/auto; node ../../../node_modules/@accessors-hosts/node/nodeHostInvoke.js devices/test/auto/WatchEmulator)
    //  To regenerate this composite accessor, run:
    //  $PTII/bin/ptinvoke ptolemy.cg.kernel.generic.accessor.AccessorCodeGenerator -language accessor $PTII/./ptolemy/actor/lib/jjs/modules/udpSocket/demo/WatchEmulator/WatchEmulator.xml
    //  to edit the model, run:
    //  $PTII/bin/capecode $PTII/./ptolemy/actor/lib/jjs/modules/udpSocket/demo/WatchEmulator/WatchEmulator.xml

    // Ports: WatchEmulator: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/TypedCompositeActor.java

    // Start: JavaScriptWatchEmulator: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptWatchEmulator = this.instantiateFromCode('JavaScriptWatchEmulator', unescape('//%20Put%20your%20JavaScript%20program%20here.%0A//%20Add%20ports%20and%20parameters.%0A//%20Define%20JavaScript%20functions%20initialize%28%29%2C%20fire%28%29%2C%20and/or%20wrapup%28%29.%0A//%20Refer%20to%20parameters%20in%20scope%20using%20dollar-sign%7BparameterName%7D.%0A//%20In%20the%20fire%28%29%20function%2C%20use%20get%28parameterName%2C%20channel%29%20to%20read%20inputs.%0A//%20Send%20to%20output%20ports%20using%20send%28value%2C%20portName%2C%20channel%29.%0A%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20this.parameter%28%27interval%27%2C%20%7B%27type%27%3A%27number%27%2C%20%27value%27%3A1000%7D%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%27type%27%3A%20%27record%27%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%7D%3B%0A%0A//%20Define%20a%20few%20helper%20functions%20to%20help%20set%20up%20the%20watch%20data%0A/**%20Convert%20short%20int%20to%202%20bytes%20array.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20*/%0Afunction%20short_to_bytes%28n%29%20%7B%0A%20%20%20%20var%20b%20%3D%20new%20Uint8Array%28%5B0%2C%200%5D%29%3B%0A%20%20%20%20if%20%28b%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20n%20%3D%20%28Math.pow%282%2C%2016%29%20+%20n%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20b%5B0%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20n%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B1%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20return%20b%3B%0A%7D%0A%0A/**%20Convert%20int%20to%203%20bytes%20array.%20*/%0Afunction%20int_to_3bytes%28n%29%20%7B%0A%20%20%20%20var%20b%20%3D%20new%20Uint8Array%28%5B0%2C%200%2C%200%5D%29%3B%0A%20%20%20%20b%5B0%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20n%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B1%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20n%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B2%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20return%20b%3B%0A%7D%0A%0A//%20Convert%20int%20to%206%20bytes%20array.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0Afunction%20timestamp_2_bytes%28n%29%20%7B%0A%20%20%20%20var%20b%20%3D%20new%20Uint8Array%28%5B0%2C%200%2C%200%2C%200%2C%200%2C%200%5D%29%3B%0A%20%20%20%20var%20milisce%20%3D%20n%20%25%201000%3B%0A%20%20%20%20n%20/%3D%201000%3B%0A%20%20%20%20b%5B0%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20n%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B1%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20n%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B2%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20n%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B3%5D%20%3D%20n%20%26%200xFF%3B%0A%20%20%20%20b%5B4%5D%20%3D%20milisce%20%26%200xFF%3B%0A%20%20%20%20milisce%20%3E%3E%3D%208%3B%0A%20%20%20%20b%5B5%5D%20%3D%20milisce%20%26%200xFF%3B%0A%20%20%20%20return%20b%3B%0A%7D%0A%0A/**%20Create%20an%20unsigned%20byte%20array%20with%20the%20watch%20data.%0A%20*%20%20@return%20The%20unsigned%20byte%20array.%0A%20*/%0Afunction%20initializeWatchData%28%29%20%7B%0A%0A%20%20%20%20//%20package%20head%20info%20--%20Device%20data%20and%20Package%20type%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20var%20DEV_ID%20%3D%20%279096%27%3B%0A%20%20%20%20var%20WATCH_TYPE%20%3D%20%22w%22.charCodeAt%280%29%3B%0A%20%20%20%20var%20GLASS_TYPE%20%3D%20%22g%22.charCodeAt%280%29%3B%0A%20%20%20%20var%20BATTERY_TYPE%20%3D%20%22b%22.charCodeAt%280%29%3B%0A%20%20%20%20var%20ACCELEROMETER_TYPE%20%3D%20%22A%22.charCodeAt%280%29%3B%0A%20%20%20%20var%20GYRO_TYPE%20%3D%20%22G%22.charCodeAt%280%29%3B%0A%0A%20%20%20%20//%20Original%20data%20of%20the%20data%20body%20for%20all%20three%20kinds%20of%20package.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20var%20ACCx%20%3D%200.98%3B%0A%20%20%20%20var%20ACCy%20%3D%200.01%3B%0A%20%20%20%20var%20ACCz%20%3D%20-0.02%3B%0A%20%20%20%20var%20GYRx%20%3D%200.2%3B%0A%20%20%20%20var%20GYRy%20%3D%20-0.3%3B%0A%20%20%20%20var%20GYRz%20%3D%200.4%3B%0A%20%20%20%20var%20PPG%20%3D%20100000%3B%0A%20%20%20%20var%20HR%20%3D%2070%3B%0A%20%20%20%20var%20BATTERY_LIFE%20%3D%2090%3B%0A%0A%20%20%20%20//%20Convert%20the%20original%20data%20to%20the%20format%20the%20data%20body%20requires.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20var%20accx%20%3D%20%28ACCx%20*%2010000%29%20%7C%200%3B%0A%20%20%20%20var%20accy%20%3D%20%28ACCy%20*%2010000%29%20%7C%200%3B%0A%20%20%20%20var%20accz%20%3D%20%28ACCz%20*%2010000%29%20%7C%200%3B%0A%20%20%20%20var%20gyrx%20%3D%20%28GYRx%20*%2010000%29%20%7C%200%3B%0A%20%20%20%20var%20gyry%20%3D%20%28GYRy%20*%2010000%29%20%7C%200%3B%0A%20%20%20%20var%20gyrz%20%3D%20%28GYRz%20*%2010000%29%20%7C%200%3B%0A%0A%20%20%20%20//%20Length%20of%20accelerometer%20packets.%0A%20%20%20%20var%20aLength%20%3D%2017%3B%0A%20%20%20%20//%20Length%20of%20gyroscope%20packets.%0A%20%20%20%20var%20gLength%20%3D%2017%3B%0A%20%20%20%20%0A%20%20%20%20//%20Send%205%20ac%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20var%20watch_p%20%3D%20new%20Uint8Array%2810%20*%20%28aLength%20+%20gLength%29%29%3B%0A%0A%20%20%20%20watch_p%5B4%5D%20%3D%20ACCELEROMETER_TYPE%3B%0A%20%20%20%20for%28var%20i%20%3D%200%3B%20i%20%3C%2010%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20var%20now%20%3D%20Date.now%28%29%3B%0A%20%20%20%20%20%20%20%20var%20offset%20%3D%20i%20*%20%28aLength%20+%20gLength%29%3B%0A%20%20%20%20%20%20%20%20var%20offset2%20%3D%20offset%20+%20aLength%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20watch_p%5B0%20+%20offset%5D%20%3D%20DEV_ID.charCodeAt%280%29%3B%0A%20%20%20%20%20%20%20%20watch_p%5B1%20+%20offset%5D%20%3D%20DEV_ID.charCodeAt%281%29%3B%0A%20%20%20%20%20%20%20%20watch_p%5B2%20+%20offset%5D%20%3D%20DEV_ID.charCodeAt%282%29%3B%0A%20%20%20%20%20%20%20%20watch_p%5B3%20+%20offset%5D%20%3D%20DEV_ID.charCodeAt%283%29%3B%0A%20%20%20%20%20%20%20%20%0A%09%20%20%20%20watch_p%5B4%20+%20offset%5D%20%3D%20ACCELEROMETER_TYPE%3B%0A%09%20%20%20%20%0A%20%20%20%20%20%20%20%20watch_p%5B5%20+%20offset%5D%20%3D%20short_to_bytes%28accx%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B6%20+%20offset%5D%20%3D%20short_to_bytes%28accx%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B7%20+%20offset%5D%20%3D%20short_to_bytes%28accy%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B8%20+%20offset%5D%20%3D%20short_to_bytes%28accy%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B9%20+%20offset%5D%20%3D%20short_to_bytes%28accz%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B10%20+%20offset%5D%20%3D%20short_to_bytes%28accz%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20watch_p%5B11%20+%20offset%5D%20%3D%20timestamp_2_bytes%28now%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B12%20+%20offset%5D%20%3D%20timestamp_2_bytes%28now%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B13%20+%20offset%5D%20%3D%20timestamp_2_bytes%28now%29%5B2%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B14%20+%20offset%5D%20%3D%20timestamp_2_bytes%28now%29%5B3%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B15%20+%20offset%5D%20%3D%20timestamp_2_bytes%28now%29%5B4%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B16%20+%20offset%5D%20%3D%20timestamp_2_bytes%28now%29%5B5%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20watch_p%5B0%20+%20offset2%5D%20%3D%20DEV_ID.charCodeAt%280%29%3B%0A%20%20%20%20%20%20%20%20watch_p%5B1%20+%20offset2%5D%20%3D%20DEV_ID.charCodeAt%281%29%3B%0A%20%20%20%20%20%20%20%20watch_p%5B2%20+%20offset2%5D%20%3D%20DEV_ID.charCodeAt%282%29%3B%0A%20%20%20%20%20%20%20%20watch_p%5B3%20+%20offset2%5D%20%3D%20DEV_ID.charCodeAt%283%29%3B%0A%20%20%20%20%20%20%20%20%0A%09%20%20%20%20watch_p%5B4%20+%20offset2%5D%20%3D%20GYRO_TYPE%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20watch_p%5B5%20+%20offset2%5D%20%3D%20short_to_bytes%28gyrx%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B6%20+%20offset2%5D%20%3D%20short_to_bytes%28gyrx%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B7%20+%20offset2%5D%20%3D%20short_to_bytes%28gyry%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B8%20+%20offset2%5D%20%3D%20short_to_bytes%28gyry%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B9%20+%20offset2%5D%20%3D%20short_to_bytes%28gyrz%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B10%20+%20offset2%5D%20%3D%20short_to_bytes%28gyrz%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20watch_p%5B11%20+%20offset2%5D%20%3D%20timestamp_2_bytes%28now%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B12%20+%20offset2%5D%20%3D%20timestamp_2_bytes%28now%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B13%20+%20offset2%5D%20%3D%20timestamp_2_bytes%28now%29%5B2%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B14%20+%20offset2%5D%20%3D%20timestamp_2_bytes%28now%29%5B3%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B15%20+%20offset2%5D%20%3D%20timestamp_2_bytes%28now%29%5B4%5D%3B%0A%20%20%20%20%20%20%20%20watch_p%5B16%20+%20offset2%5D%20%3D%20timestamp_2_bytes%28now%29%5B5%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20//watch_p%5B5%20+%20i%20*%2022%20+%2012%5D%20%3D%20int_to_3bytes%28PPG%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20//watch_p%5B5%20+%20i%20*%2022%20+%2013%5D%20%3D%20int_to_3bytes%28PPG%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20//watch_p%5B5%20+%20i%20*%2022%20+%2014%5D%20%3D%20int_to_3bytes%28PPG%29%5B2%5D%3B%0A%20%20%20%20%20%20%20%20//watch_p%5B5%20+%20i%20*%2022%20+%2015%5D%20%3D%20%28HR%20%26%200xFF%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20watch_p%3B%0A%7D%0A%0A//%20These%20variables%20will%20not%20be%20visible%20to%20subclasses.%0Avar%20handle%20%3D%20null%3B%0Avar%20count%20%3D%200%3B%0A%0Aexports.generate%20%3D%20function%28%29%20%7B%0A%09var%20watch_p%20%3D%20initializeWatchData%28%29%3B%0A%09this.send%28%27output%27%2C%20watch_p%29%3B%0A%7D%0A%0Aexports.initialize%20%3D%20function%28%29%20%7B%0A%09handle%20%3D%20this.addInputHandler%28%27trigger%27%2C%20this.exports.generate.bind%28this%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%28%29%20%7B%0A%20%20%20%20if%20%28handle%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20//clearInterval%28handle%29%3B%0A%20%20%20%20%20%20%20%20//handle%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.removeInputHandler%28handle%29%3B%0A%20%20%20%20%7D%0A%7D%3B'));
    JavaScriptWatchEmulator.setParameter('interval', 1000.0);

    // Start: UDPSocketSender: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: UDPSocketSender: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var UDPSocketSender = this.instantiateFromCode('UDPSocketSender', unescape('//%20Copyright%20%28c%29%202016-2016%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20This%20accessor%20sends%20UDP%20%28datagram%29%20messages%20to%20the%20specified%0A%20*%20%20destination%20address%20and%20port.%0A%20*%0A%20*%20%20The%20send%20type%20can%20be%20any%20of%20those%20supported%20by%20the%20host.%20%20The%20list%0A%20*%20%20of%20supported%20types%20will%20be%20provided%20as%20options%20for%20the%20%60sendType%60%0A%20*%20%20parameter.%20For%20the%20Ptolemy%20II%20host%2C%20these%20include%20at%20least%0A%20*%20%20%27string%27%2C%20%27number%27%2C%20%27image%27%2C%20and%20a%20variety%20of%20numeric%20types.%0A%20*%0A%20*%20%20Note%20that%20UDP%2C%20unlike%20TCP%2C%20has%20the%20notion%20of%20a%20%22message%22%20%28a%0A%20*%20%20datagram%29.%20A%20message%20can%20contain%20more%20than%20one%20byte.%20%20The%0A%20*%20%20%60receiveType%60%20determines%20the%20type%20of%20the%20elements%20sent%0A%20*%20%20by%20this%20accessor%0A%20*%0A%20*%20%20@accessor%20net/UDPSocketSender%0A%20*%20%20@author%20Hokeun%20Kim%20and%20Edward%20A.%20Lee%2C%20Contributor%3A%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20UDPSocketSender.js%201597%202017-04-29%2015%3A41%3A50Z%20cxh%20%24%24%0A%20*%0A%20*%20%20@input%20toSend%20The%20message%20to%20send.%0A%20*%20%20@input%20%7Bstring%7D%20destinationAddress%20The%20host%20name%20or%20IP%20address%20to%20send%20to.%0A%20*%20%20%20This%20defaults%20to%20%22localhost%22.%0A%20*%20%20@input%20%7Bint%7D%20destinationPort%20The%20port%20to%20send%20to.%0A%20*%20%20%20This%20defaults%20to%208084.%0A%20*%20%20@parameter%20%7Bstring%7D%20sendType%20See%20above.%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20addInputHandler%2C%20console%2C%20exports%2C%20get%2C%20input%2C%20output%2C%20require%2C%20send%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%27use%20strict%27%3B%0A%0A//%20This%20accessor%20requires%20the%20optional%20%27udpSocket%27%20module%2C%20which%20may%20or%20may%0A//%20not%20be%20provided%20by%20an%20accessor%20host.%20Most%20hosts%20will%20provide%20this%20module.%0Avar%20UDPSocket%20%3D%20require%28%27@accessors-modules/udp-socket%27%29%3B%0A%0A//%20Set%20up%20the%20accessor.%20In%20an%20XML%20specification%2C%20this%20information%20would%0A//%20be%20provided%20in%20XML%20syntax.%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.input%28%27toSend%27%29%3B%0A%0A%20%20%20%20this.input%28%27destinationAddress%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27localhost%27%2C%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20this.input%28%27destinationPort%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%208084%2C%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27int%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27sendType%27%2C%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20value%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20//%20Attempt%20to%20add%20a%20list%20of%20options%20for%20types%2C%20but%20do%20not%20error%20out%0A%20%20%20%20//%20if%20the%20socket%20module%20is%20not%20supported%20by%20the%20host.%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20this.parameter%28%27sendType%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20UDPSocket.supportedSendTypes%28%29%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20this.error%28err%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0Avar%20socket%20%3D%20null%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20socket%20%3D%20UDPSocket.createSocket%28%29%3B%0A%20%20%20%20socket.on%28%27error%27%2C%20function%20%28message%29%20%7B%0A%20%20%20%20%20%20%20%20self.error%28message%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20socket.setSendType%28this.get%28%27sendType%27%29%29%3B%0A%20%20%20%20this.addInputHandler%28%27toSend%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20message%20%3D%20self.get%28%27toSend%27%29%3B%0A%20%20%20%20%20%20%20%20socket.send%28message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20self.get%28%27destinationPort%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20self.get%28%27destinationAddress%27%29%29%3B%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20This%20null%20check%20avoids%20an%20error%20in%20code%20generation.%0A%20%20%20%20if%20%28socket%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20socket.close%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    UDPSocketSender.setDefault('destinationAddress', "localhost");
    UDPSocketSender.setParameter('sendType', "unsignedbyte");
    UDPSocketSender.setDefault('destinationPort', 4568);

    // Start: TestSpontaneousOnce: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TestSpontaneousOnce: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TestSpontaneousOnce = this.instantiateFromCode('TestSpontaneousOnce', unescape('//%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once.%0A//%0A//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A%0A/**%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A%20*%20%20This%20implementation%20produces%20a%20counting%20sequence.%0A%20*%0A%20*%20%20@accessor%20test/TestSpontaneousOnce%0A%20*%20%20@parameter%20delay%20The%20delay%20in%20milliseconds%20before%20the%20value%20is%20outputk.%0A%20*%20%20@parameter%20value%20The%20value%20to%20be%20output%20after%20the%20delay.%0A%20*%20%20@output%20output%20The%20output%20port%0A%20*%20%20@author%20Christopher%20Brooks%20and%20Edward%20A.%20Lee.%20Based%20on%20TestSpontaneous%20by%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TestSpontaneousOnce.js%201659%202017-05-09%2014%3A26%3A57Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20clearTimeout%2C%20console%2C%20error%2C%20exports%2C%20require%2C%20setTimeout%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27delay%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%201000%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27value%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20true%0A%20%20%20%20%7D%29%3B%20%0A%20%20%20%20this.output%28%27output%27%29%3B%0A%7D%3B%0A%0A//%20These%20variables%20will%20not%20be%20visible%20to%20subclasses.%0Avar%20handle%20%3D%20null%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20Need%20to%20record%20%27this%27%20for%20use%20in%20the%20callback.%0A%20%20%20%20var%20thiz%20%3D%20this%3B%0A%20%20%20%20handle%20%3D%20setTimeout%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20thiz.send%28%27output%27%2C%20thiz.getParameter%28%27value%27%29%29%3B%0A%20%20%20%20%7D%2C%20this.getParameter%28%27delay%27%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28handle%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28handle%29%3B%0A%20%20%20%20%20%20%20%20handle%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    TestSpontaneousOnce.setParameter('delay', 1000.0);
    TestSpontaneousOnce.setParameter('value', true);

    // Start: TrainableTest2: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TrainableTest2: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TrainableTest2 = this.instantiateFromCode('TrainableTest2', unescape('//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A/**%20Compare%20the%20input%20with%20a%20known%20good%20input.%0A%20*%20%20If%20you%20set%20%27%27trainingMode%27%27%20to%20true%20and%20provide%20inputs%2C%20then%20the%0A%20*%20%20inputs%20will%20be%20recorded%20in%20the%20%27%27correctValues%27%27%20parameters.%0A%20*%20%20Otherwise%2C%20the%20inputs%20will%20be%20compared%20against%20those%20in%20the%0A%20*%20%20%27%27correctValue%27%27%20parameter.%0A%20*%0A%20*%20%20@accessor%20test/TrainableTest%0A%20*%20%20@input%20input%20The%20input%20value.%0A%20*%20%20@output%20output%20False%20as%20long%20as%20there%20is%20data%20to%20compare%20against%20the%20input%0A%20*%20%20@param%20correctValues%20a%20JSON%20array%20of%20the%20correct%20values.%0A%20*%20%20@param%20trainingMode%20true%20if%20the%20input%20is%20being%20trained.%0A%20*%20%20@author%20Christopher%20Brooks%20based%20on%20the%20Ptolemy%20NonStrictTest%20actor%20by%20Paul%20Whitaker%2C%20Christopher%20Hylands%2C%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TrainableTest.js%202058%202017-08-16%2023%3A26%3A01Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20console%2C%20exports*/%0A/*jshint%20globalstrict%3A%20true*/%0A/*jslint%20plusplus%3A%20true%20*/%0A%27use%20strict%27%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27correctValues%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%5B0%5D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27input%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27tolerance%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200.000000001%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27trainingMode%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20false%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A//%20Input%2C%20parameter%20and%20variable%20names%20match%20those%20in%20%24PTII/ptolemy/actor/lib/NonStrictTest.java%0A%0A//%20Set%20to%20true%20if%20an%20input%20is%20handled.%20%20If%20no%20inputs%20are%20handled%2C%20then%0A//%20throw%20an%20exception%20in%20wrapup%28%29.%0Avar%20inputHandled%20%3D%20false%3B%0A%0A//%20Set%20to%20true%20when%20initialize%28%29%20is%20called.%0Avar%20initialized%20%3D%20false%3B%0A%0A//%20The%20number%20of%20input%20tokens%20that%20have%20been%20read%20in.%0Avar%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A//%20If%20trainingMode%20is%20true%2C%20then%20inputs%20that%20have%20been%20seen%20so%20far.%0Avar%20trainingTokens%20%3D%20%5B%5D%3B%0A%0A//%20Set%20to%20false%20in%20initialize%28%29%20and%20true%20at%20the%20end%20of%20wrapup%28%29.%0A//%20FIXME%3A%20We%20should%20have%20an%20exit%20hook%20that%20checks%20that%20wrapup%28%29%20is%20called%20for%20all%20the%20actors.%0Avar%20wrappedUp%20%3D%20false%3B%0A%0A//%20So%20we%20can%20test%20this%20in%20hosts/node/test/mocha/testMain.js%20to%20test%20that%20wrapup%20was%20called.%0Aexports.wrappedUp%20%3D%20wrappedUp%3B%0A%0A/**%20Create%20an%20input%20handler%20to%20compare%20the%20input%20with%20the%20appropriate%20element%28s%29%0A%20*%20%20from%20correctValues.%0A%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//console.log%28%22Test%20initialize%28%29%3A%20typeof%20correctValues%3A%20%22%20+%20typeof%20this.getParameter%28%27correctValues%27%29%29%0A%20%20%20%20var%20inputValueValue%2C%0A%20%20%20%20%20%20%20%20self%20%3D%20this%3B%0A%0A%20%20%20%20trainingTokens%20%3D%20%5B%5D%3B%0A%20%20%20%20exports.wrappedUp%20%3D%20false%3B%0A%20%20%20%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A%20%20%20%20this.addInputHandler%28%27input%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20cache%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20%3D%20self.get%28%27input%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%3B%0A%20%20%20%20%20%20%20%20inputHandled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20//%20If%20the%20input%20is%20not%20connected%2C%20then%20inputValue%20will%20be%20null.%0A%20%20%20%20%20%20%20%20if%20%28self.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20trainingTokens.push%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20self.getParameter%28%27correctValues%27%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceToken%20%3D%20correctValuesValues%5BnumberOfInputTokensSeen%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//console.log%28%22Test%3A%20%22%20+%20numberOfInputTokensSeen%20+%20%22%2C%20input%3A%20%22%20+%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20//+%20%22%2C%20referenceToken%3A%20%22%20+%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27boolean%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20%21%3D%3D%20%27number%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20%21%3D%3D%20%27object%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20value%20of%20the%20input%20was%20null%3F%20%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Perhaps%20the%20input%20is%20not%20connected%3F%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20neither%20a%20number%20nor%20a%20string%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27%20with%20value%20%27%20+%20inputValueValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27boolean%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20the%20input%20not%20a%20boolean%2C%20then%20throw%20an%20error.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27boolean%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20boolean%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27.%20%20The%20expected%20value%20was%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20not%20equal%20to%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20the%20input%20not%20a%20number%2C%20then%20throw%20an%20error.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27.%20%20The%20expected%20value%20was%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20difference%20%3D%20Math.abs%28inputValue%20-%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isNaN%28difference%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20absolute%20value%20of%20the%20input%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20+%20%27%22%20-%20the%20referenceToken%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%20is%20NaN%3F%20%20It%20should%20be%20less%20than%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28difference%20%3E%20self.getParameter%28%27tolerance%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20not%20within%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20of%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20devices/test/auto/WatchEmulator.js%20needs%20this%20test%20for%20object%20because%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20we%20receive%20a%20JSON%20object%2C%20then%20we%20should%20try%20to%20stringify%20it.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22.%20%20The%20input%20was%20an%20object%2C%20and%20a%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValueValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22.%20%20The%20input%20was%20an%20object%20and%20JSON.stringify%28%29%20did%20not%20throw%20an%20exception.%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27A%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceTokenValue%20%3D%20JSON.stringify%28referenceToken%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20comparing%20longs%20from%20CapeCode%2C%20then%20the%20values%20will%20be%20like%20%221L%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20and%20stringify%20will%20return%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceToken%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceTokenValue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20inputValueValue%20could%20still%20be%20undefined%20here%20if%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20was%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20undefined%20%26%26%20inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%21%3D%3D%20undefined%20%26%26%20referenceTokenValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceTokenValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Deal%20with%20referenceTokens%20with%20value%201L.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValueValue%20%21%3D%3D%20%27object%27%20%7C%7C%20typeof%20referenceTokenValue%20%21%3D%3D%20%27object%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue.toString%28%29%20%21%3D%3D%20referenceTokenValue.toString%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27tokens%2C%20the%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20%21%3D%3D%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20+%20%27%22%20typeof%20inputValueValue%3A%20%27%20+%20typeof%20inputValueValue%20+%20%27%20typeof%20referenceTokenValue%3A%20%27%20+%20typeof%20referenceTokenValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20referenceToken%20%22%27%20+%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20past%20the%20end%20of%20the%20expected%20inputs%2C%20then%20read%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3E%3D%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20initialized%20%3D%20true%3B%0A%7D%3B%0A%0A/**%20If%20trainingMode%20is%20true%2C%20then%20updated%20the%20correctValues.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28this.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20this.setParameter%28%27correctValues%27%2C%20trainingTokens%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28initialized%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21inputHandled%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20input%20handler%20of%20this%20accessor%20was%20never%20invoked.%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Usually%2C%20this%20is%20an%20error%20indicating%20that%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27starvation%20is%20occurring.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20this.getParameter%28%27correctValues%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20test%20produced%20only%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20yet%20the%20correctValues%20parameter%20was%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27expecting%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20correctValuesValues.length%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20name%20%3D%20this.accessorName%3B%0A%0A%20%20%20%20//%20FIXME%3A%20Should%20we%20check%20to%20see%20if%20the%20name%20has%20no%20dots%20in%20and%20if%0A%20%20%20%20//%20it%20does%20not%2C%20add%20the%20container%20name%3F%0A%0A%20%20%20%20//if%20%28this.container%29%20%7B%0A%20%20%20%20//%20%20%20%20name%20%3D%20this.container.accessorName%20+%20%22.%22%20+%20name%3B%0A%20%20%20%20//%7D%0A%0A%20%20%20%20//%0A%20%20%20%20exports.wrappedUp%20%3D%20true%3B%0A%20%20%20%20//%20console.log%28%22TrainableTest.js%3A%20wrapup%28%29%20finished%3A%20%22%20+%20name%20+%20%22%2C%20exports.wrappedUp%3A%20%22%20+%20exports.wrappedUp%29%3B%0A%0A%7D%3B%0A'));
    TrainableTest2.setParameter('correctValues', ["{\"watchID\":\"9096\",\"x\":11.722488038277511,\"y\":0.11961722488038277,\"z\":-0.23923444976076555}"]);
    TrainableTest2.setParameter('trainingMode', false);
    TrainableTest2.setParameter('tolerance', 1.0E-9);

    // Start: JavaScriptDeleteTimestamps: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptDeleteTimestamps = this.instantiateFromCode('JavaScriptDeleteTimestamps', unescape('//%20Delete%20timestamps%20from%20JSON%20input.%0A%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%27type%27%3A%20%27JSON%27%7D%29%3B%0A%20%20%20%20this.input%28%27input%27%2C%20%7B%27type%27%3A%20%27JSON%27%7D%29%3B%0A%7D%3B%0A%0Aexports.deleteTimestamp%20%3D%20function%28%29%20%7B%0A%09var%20json%20%3D%20this.get%28%27input%27%29%3B%0A%09delete%20json.timestamp%0A%09this.send%28%27output%27%2C%20json%29%3B%0A%7D%0A%0Avar%20handle%20%3D%20null%3B%0A%0Aexports.initialize%20%3D%20function%28%29%20%7B%0A%09handle%20%3D%20this.addInputHandler%28%27input%27%2C%20this.exports.deleteTimestamp.bind%28this%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%28%29%20%7B%0A%20%20%20%20if%20%28handle%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20this.removeInputHandler%28handle%29%3B%0A%20%20%20%20%7D%0A%7D%3B'));

    // Start: Moto360SensorListener: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: Moto360SensorListener: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var Moto360SensorListener = this.instantiateFromCode('Moto360SensorListener', unescape('//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A%0A/**%0A%20*%20Read%20sensor%20data%20from%20a%20Moto%20360%20watch%20that%20is%20broadcasting%20the%20data%20via%0A%20*%20UDP%20on%20the%20local%20network.%0A%20*%0A%20*%20FIXME%3A%20Give%20the%20app%20that%20needs%20to%20be%20running%20on%20the%20watch.%0A%20*%0A%20*%20Each%20sensor%20has%20its%20own%20output%20port.%20%20The%20outputs%20will%20be%20objects%20with%0A%20*%20fields%20%27watchID%27%2C%20a%20four-character%20string%2C%20and%20%27timestamp%27%20representing%0A%20*%20FIXME%3A%20what%20information%20is%20this%3F%0A%20*%0A%20*%20See%20https%3A//www.terraswarm.org/urbanheartbeat/wiki/Main/WatchSoftware%0A%20*%20for%20details%20on%20the%20software%20that%20runs%20on%20the%20watch.%0A%20*%0A%20*%20@accessor%20devices/Moto360SensorListener%0A%20*%0A%20*%20@output%20message%20The%20received%20message%20as%20a%20raw%20byte%20array.%0A%20*%20@output%20%7Bboolean%7D%20listening%20True%20to%20indicate%20that%20listening%20has%20begun%2C%20false%20to%0A%20*%20%20%20indicate%20that%20it%20has%20stopped.%0A%20*%20@output%20accelerometer%20The%20accelerometer%20data%20from%20the%20watch.%20This%20is%20an%20object%0A%20*%20%20%20with%20fields%20x%2C%20y%2C%20z%20representing%20measured%20acceleration%20%28or%20the%20earth%27s%20gravitational%0A%20*%20%20%20field%2C%20which%20is%20indistinguishable%20from%20acceleration%29.%20These%20will%20be%20in%20SI%20units%0A%20*%20%20%20of%20meters%20per%20second%20squared.%20The%20%27z%27%20field%20points%20into%0A%20*%20%20%20the%20watch%20face%2C%20so%20it%20will%20be%20roughly%20+9.8%20%28one%20g%29%20when%20the%20watch%20is%20facing%20up.%0A%20*%20%20%20The%20%27x%27%20field%20is%20transverse%20to%20the%20watch%2C%20where%20+9.8%20occurs%20roughly%20when%209%20o%27clock%0A%20*%20%20%20is%20pointing%20straight%20down.%20The%20%27y%27%20axis%20is%20along%20band%20axis%2C%20where%20+9.8%20will%20occur%0A%20*%20%20%20roughly%20when%20the%2012%20o%27clock%20is%20pointing%20straight%20up.%0A%20*%20@output%20gyro%20The%20gyroscope%20data%20from%20the%20watch.%20This%20is%20an%20object%0A%20*%20%20%20with%20fields%20x%2C%20y%2C%20z%20representing%20measured%20angular%20rotation%20%28in%20radians%20per%20second%29.%0A%20*%20%20%20The%20%27z%27%20field%20represents%20rotation%20around%20an%20axis%20pointing%20into%20the%20watch%20face.%0A%20*%20%20%20The%20%27x%27%20field%20axis%20transverse%20to%20the%20watch%2C%20and%20the%20%27y%27%20axis%20is%20along%20band%20axis.%0A%20*%20%20%20These%20are%20the%20same%20axes%20as%20for%20the%20accelerometer.%0A%20*%0A%20*%20@input%20%7Bstring%7D%20listeningAddress%20The%20interface%20to%20listen%20on%20for%20incoming%20messages.%0A%20*%20%20%20This%20defaults%20to%20%220.0.0.0%22%2C%20which%20means%20to%20listen%20on%20all%20network%20interfaces.%0A%20*%20@input%20%7Bint%7D%20listeningPort%20The%20port%20to%20listen%20on%20for%20incoming%20messages.%0A%20*%20%20%20This%20defaults%20to%204567.%0A%20*%0A%20*%20@parameter%20accelerometerSensitivity%20If%20this%20is%20set%20to%20something%20other%20than%20zero%2C%0A%20*%20%20%20then%20this%20accessor%20will%20output%20accelerometer%20data%20only%20when%20the%20accelerometer%0A%20*%20%20%20reading%20differs%20in%20some%20axis%20by%20more%20than%20the%20specified%20sensitivity.%0A%20*%20%20%20A%20small%20number%20means%20high%20sensitivity%20%28lots%20of%20outputs%29%20and%20a%20larger%20number%0A%20*%20%20%20means%20low%20sensitivity%20%28fewer%20outputs%29.%0A%20*%20@parameter%20gyroSensitivity%20If%20this%20is%20set%20to%20something%20other%20than%20zero%2C%0A%20*%20%20%20then%20this%20gyroscope%20will%20output%20data%20only%20when%20the%20gyro%0A%20*%20%20%20reading%20differs%20in%20some%20axis%20by%20more%20than%20the%20specified%20sensitivity.%0A%20*%20%20%20A%20small%20number%20means%20high%20sensitivity%20%28lots%20of%20outputs%29%20and%20a%20larger%20number%0A%20*%20%20%20means%20low%20sensitivity%20%28fewer%20outputs%29.%0A%20*%0A%20*%20@author%20Christopher%20Brooks%20and%20Edward%20A.%20Lee%0A%20*%20@version%20%24%24Id%3A%20Moto360SensorListener.js%201725%202017-05-19%2022%3A59%3A11Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20clearTimeout%2C%20console%2C%20error%2C%20exports%2C%20httpRequest%2C%20require%2C%20setTimeout%20%20*/%0A/*jshint%20globalstrict%3A%20true%2C%20bitwise%3A%20false%2C%20-W016*/%0A/*jslint%20bitwise%3A%20false*/%0A%22use%20strict%22%3B%0A%0A//%20This%20accessor%20requires%20the%20optional%20%27udpSocket%27%20module%2C%20which%20may%20or%20may%0A//%20not%20be%20provided%20by%20an%20accessor%20host.%20Most%20hosts%20will%20provide%20this%20module.%0Avar%20UDPSocket%20%3D%20require%28%27@accessors-modules/udp-socket%27%29%3B%0A%0A//%20FIXME%3A%20Use%20built%20in%20debug%20capability.%0Avar%20debug%20%3D%20false%3B%0A%0A//%20Initialize%20these%20to%20large%20numbers%20so%20that%20the%20first%20output%20always%20appears.%0A//%20Accelerometer%20values.%0Avar%20previousX%20%3D%20-100.0%3B%0Avar%20previousY%20%3D%20-100.0%3B%0Avar%20previousZ%20%3D%20-100.0%3B%0A//%20Gyro%20values.%0Avar%20previousGX%20%3D%20-100.0%3B%0Avar%20previousGY%20%3D%20-100.0%3B%0Avar%20previousGZ%20%3D%20-100.0%3B%0A%0A/**%20Set%20up%20the%20accessor%20by%20defining%20the%20inputs%20and%20outputs.%0A%20*/%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.extend%28%27net/UDPSocketListener%27%29%3B%0A%0A%20%20%20%20//%20Override%20the%20value%20of%20listeningPort%20in%20the%20parent.%0A%20%20%20%20this.input%28%27listeningPort%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%204568%2C%20//%204568%20is%20the%20value%20found%20in%0A%20%20%20%20%20%20%20%20//%20https%3A//github.com/terraswarm/WatchSoftware/blob/master/WatchSensorsUDP/app/src/main/java/org/terraswarm/accessor/wear/watchsensorsudp/MessageSender.java%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27int%27%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20//%20Accelerometer%20output%20port.%0A%20%20%20%20this.output%28%27accelerometer%27%29%3B%0A%20%20%20%20this.parameter%28%27accelerometerSensitivity%27%2C%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20value%3A%200.0%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20//%20Gyro%20output%20port.%0A%20%20%20%20this.output%28%27gyro%27%29%3B%0A%20%20%20%20this.parameter%28%27gyroSensitivity%27%2C%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20value%3A%200.0%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20this.parameter%28%27receiveType%27%2C%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20value%3A%20%27unsignedbyte%27%2C%0A%20%20%20%20%20%20%20%20visibility%3A%20%27expert%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20FIXME%3A%20Is%20this%20needed%3F%0A%20%20%20%20exports.ssuper.initialize.call%28this%29%3B%0A%7D%3B%0A%0A//%20Convert%20the%202%20bytes%20data%20to%20a%20integer.%0A//%20The%20first%20argument%20is%20the%20higher-order%20byte%2C%20and%20the%20second%20is%20the%20lower-order%20byte.%0A//%20These%20are%20assumed%20to%20be%20non-negative%20numbers%20between%200%20and%20255.%0A//%20If%20the%20result%20is%20greater%20than%20or%20equal%20to%202%5E15%20%3D%2032768%2C%20then%20the%20two%20bytes%20are%0A//%20interpreted%20as%20a%20two%27s%20complement%20negative%20number%20and%20a%20negative%20integer%20is%20returned.%0A//%20The%20returned%20result%20always%20lies%20between%20-32768%20and%2032767%2C%20inclusive.%0Afunction%20bytesToInt%28a%2C%20b%29%20%7B%0A%20%20%20%20if%20%28debug%29%20%7B%0A%20%20%20%20%20%20%20%20console.log%28%27********%20translating%3A%20%27%20+%20a%20+%20%27%2C%20%27%20+%20b%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20c%20%3D%20a%20*%20Math.pow%282%2C%208%29%3B%0A%20%20%20%20c%20%3D%20c%20+%20b%3B%0A%20%20%20%20if%20%28c%20%3E%3D%20Math.pow%282%2C%2015%29%29%20%7B%0A%20%20%20%20%20%20%20%20c%20%3D%20%28Math.pow%282%2C%2016%29%20-%20c%29%20*%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20c%3B%0A%7D%0A%0A//%20Convert%20a%20timestamp%20to%20time%20string.%0Afunction%20timestamp2string%28time_stamp%29%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20//%20Python%20time%20is%20in%20seconds.%20%20JavaScript%20milliseconds.%0A%20%20%20%20%20%20%20%20//d%20%3D%20datetime.fromtimestamp%28time_stamp%20/%201000.0%29%3B%0A%20%20%20%20%20%20%20%20time_stamp%20%3D%20Math.round%28time_stamp%20*%201000%29%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20new%20Date%28time_stamp%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20str1%20%3D%20d.toISOString%28%29%3B%0A%20%20%20%20%20%20%20%20//console.log%28%22timestamp2string%28%22%20+%20time_stamp%20+%20%22%29%22%20+%20d%20+%20%22%20%22%20+%20Date.now%28%29%29%3B%0A%0A%20%20%20%20%20%20%20%20//%20Python%3A%202015-08-28%2016%3A43%3A37.283000%0A%20%20%20%20%20%20%20%20//%20JavaScript%3A%202016-10-05T03%3A21%3A09.617Z%0A%20%20%20%20%20%20%20%20return%20str1%3B%0A%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20%20%20console.log%28e%29%3B%0A%20%20%20%20%20%20%20%20return%20%27%27%3B%0A%20%20%20%20%7D%0A%7D%0A%0A//%20Convert%20the%208%20bytes%20timestamp%20to%20float.%0Afunction%20bytes2float%28byte_array%29%20%7B%0A%20%20%20%20var%20value%20%3D%20%28byte_array%5B0%5D%20%26%200xff%29%20%7C%20%28%28byte_array%5B1%5D%20%3C%3C%208%29%20%26%200xff00%29%20%7C%20%28%28byte_array%5B2%5D%20%3C%3C%2016%29%20%26%200xff0000%29%20%7C%20%28%28byte_array%5B3%5D%20%3C%3C%2024%29%20%26%200xff000000%29%3B%0A%20%20%20%20value%20+%3D%20%28%28%28%28byte_array%5B4%5D%29%20%26%200xff%29%20%7C%20%28%28byte_array%5B5%5D%20%3C%3C%208%29%20%26%200xff00%29%29%20/%201000%29%3B%0A%20%20%20%20return%20value%3B%0A%7D%0A%0A//%20Override%20the%20base%20class%20to%20attach%20a%20message%20listening%20function.%0Aexports.closeAndOpen%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20exports.ssuper.closeAndOpen.call%28this%29%3B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20exports.ssuper.socket.on%28%27message%27%2C%20function%20%28message%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28exports.ssuper.running%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20Send%20out%20the%20raw%20message.%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27message%27%2C%20message%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20watchID%20%3D%20String.fromCharCode%28message%5B0%5D%29%20+%20String.fromCharCode%28message%5B1%5D%29%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20String.fromCharCode%28message%5B2%5D%29%20+%20String.fromCharCode%28message%5B3%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20Get%20the%20timestamp.%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20timestamp%20%3D%20timestamp2string%28bytes2float%28message.slice%2811%2C%2017%29%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28debug%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%22Message%20received%3A%20%22%20+%20message%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27Watch%20ID%3A%20%27%20+%20watchID%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27Message%20type%3A%20%27%20+%20String.fromCharCode%28message%5B4%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20json%2C%20x%2C%20y%2C%20z%2C%20sensitivity%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20Check%20for%20accelerometer%20data.%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28message%5B4%5D%20%3D%3D%20%22A%22.charCodeAt%280%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Received%20accelerometer%20data.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20To%20get%20SI%20units%20of%20m/s%5E2%2C%20the%20scaling%20factor%20needs%20to%20match%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20what%20is%20used%20in%20the%20watch%20application%27s%20SCALE_ACCELEROMETER%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20variable.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20SCALE_ACCELEROMETER%20%3D%20836%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20bytesToInt%28message%5B6%5D%2C%20message%5B5%5D%29%20/%20SCALE_ACCELEROMETER%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20bytesToInt%28message%5B8%5D%2C%20message%5B7%5D%29%20/%20SCALE_ACCELEROMETER%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20z%20%3D%20bytesToInt%28message%5B10%5D%2C%20message%5B9%5D%29%20/%20SCALE_ACCELEROMETER%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Compare%20current%20data%20against%20previous%20data.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sensitivity%20%3D%20self.getParameter%28%27accelerometerSensitivity%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sensitivity%20%3D%3D%3D%200.0%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%28x%20-%20previousX%29%20%3E%20sensitivity%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%28y%20-%20previousY%29%20%3E%20sensitivity%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%28z%20-%20previousZ%29%20%3E%20sensitivity%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Output%20is%20to%20be%20produced.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20previousX%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20previousY%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20previousZ%20%3D%20z%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20watchID%3A%20watchID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27x%27%3A%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27y%27%3A%20y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27z%27%3A%20z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27timestamp%27%3A%20timestamp%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28debug%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%22Accelerometer%20output%3A%20%22%20+%20JSON.stringify%28json%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%22accelerometer%22%2C%20json%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28message%5B4%5D%20%3D%3D%20%22G%22.charCodeAt%280%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Received%20gyro%20data.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20To%20get%20units%20of%20radians%20per%20second%2C%20the%20scaling%20factor%20needs%20to%20match%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20what%20is%20used%20in%20the%20watch%20application%27s%20SCALE_GYRO%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20variable.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20SCALE_GYRO%20%3D%205208%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20bytesToInt%28message%5B6%5D%2C%20message%5B5%5D%29%20/%20SCALE_GYRO%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20bytesToInt%28message%5B8%5D%2C%20message%5B7%5D%29%20/%20SCALE_GYRO%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20z%20%3D%20bytesToInt%28message%5B10%5D%2C%20message%5B9%5D%29%20/%20SCALE_GYRO%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Compare%20current%20data%20against%20previous%20data.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sensitivity%20%3D%20self.getParameter%28%27gyroSensitivity%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sensitivity%20%3D%3D%3D%200.0%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%28x%20-%20previousGX%29%20%3E%20sensitivity%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%28y%20-%20previousGY%29%20%3E%20sensitivity%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%28z%20-%20previousGZ%29%20%3E%20sensitivity%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Output%20is%20to%20be%20produced.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20previousGX%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20previousGY%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20previousGZ%20%3D%20z%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20watchID%3A%20watchID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27x%27%3A%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27y%27%3A%20y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27z%27%3A%20z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27timestamp%27%3A%20timestamp%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28debug%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%22Gyro%20output%3A%20%22%20+%20JSON.stringify%28json%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%22gyro%22%2C%20json%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28debug%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%22---------%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A'));
    Moto360SensorListener.setDefault('listeningAddress', "0.0.0.0");
    Moto360SensorListener.setParameter('receiveType', "unsignedbyte");
    Moto360SensorListener.setDefault('listeningPort', 4568);
    Moto360SensorListener.setParameter('accelerometerSensitivity', 0.0);
    Moto360SensorListener.setParameter('gyroSensitivity', 0.0);

    // Start: Stop: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: Stop: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var Stop = this.instantiateFromCode('Stop', unescape('//%20Accessor%20that%20stops%20execution%20of%20the%20enclosing%20swarmlet.%0A//%0A//%20Copyright%20%28c%29%202016-2016%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Accessor%20that%20stops%20execution%20of%20the%20enclosing%20swarmlet%20when%20it%0A%20*%20%20receives%20an%20input%20with%20value%20true.%20It%20does%20this%20by%20identifying%0A%20*%20%20the%20top-level%20enclosing%20composite%20accessor%20and%20invoking%20wrapup%0A%20*%20%20on%20it.%0A%20*%0A%20*%20%20@accessor%20utilities/Stop%0A%20*%20%20@input%20%7Bboolean%7D%20stop%20A%20signal%20with%20value%20true%20to%20stop%20the%20swarmlet.%0A%20*%20%20@author%20Edward%20A.%20Lee%20%28eal@eecs.berkeley.edu%29%0A%20*%20%20@version%20%24%24Id%3A%20Stop.js%201489%202017-04-08%2008%3A56%3A47Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*global%20%20exports%2C%20require%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.input%28%27stop%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.addInputHandler%28%27stop%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20stop%20%3D%20this.get%28%27stop%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28stop%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.stop%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A'));

    // Connections: WatchEmulator: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/TypedCompositeActor.java
    this.connect(TestSpontaneousOnce, 'output', JavaScriptWatchEmulator, 'trigger');
    this.connect(JavaScriptWatchEmulator, 'output', UDPSocketSender, 'toSend');
    this.connect(JavaScriptDeleteTimestamps, 'output', TrainableTest2, 'input');
    this.connect(Moto360SensorListener, 'accelerometer', JavaScriptDeleteTimestamps, 'input');
    this.connect(TrainableTest2, 'output', Stop, 'stop');
};

// To update the initialize code below, modify
//   $PTII/ptolemy/cg/kernel/generic/accessor/AccessorCodeGenerator.java
if (exports.initialize) {
    var originalInitialize = exports.initialize;
    exports.initialize = function() {
        originalInitialize.call(this);
        this.stopAt(2000.0);
    }
} else {
    exports.initialize = function() {
        this.stopAt(2000.0);
    }
}
