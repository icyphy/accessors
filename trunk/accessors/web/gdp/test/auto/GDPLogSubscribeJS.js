exports.setup = function() {
    //  This composite accessor was created by Cape Code.
    //  To run the code, run: 
    //  (cd $PTII/org/terraswarm/accessor/accessors/web/gdp/test/auto; node ../../../node_modules/@accessors-hosts/node/nodeHostInvoke.js gdp/test/auto/GDPLogSubscribeJS)
    //  To regenerate this composite accessor, run:
    //  $PTII/bin/ptinvoke ptolemy.cg.kernel.generic.accessor.AccessorCodeGenerator -language accessor $PTII/./ptolemy/actor/lib/jjs/modules/gdp/test/auto/GDPLogSubscribeJS.xml
    //  to edit the model, run:
    //  $PTII/bin/capecode $PTII/./ptolemy/actor/lib/jjs/modules/gdp/test/auto/GDPLogSubscribeJS.xml

    // Ports: GDPLogSubscribeJS: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/TypedCompositeActor.java

    // Start: TrainableTest2: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TrainableTest2: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TrainableTest2 = this.instantiateFromCode('TrainableTest2', unescape('//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A/**%20Compare%20the%20input%20with%20a%20known%20good%20input.%0A%20*%20%20If%20you%20set%20%27%27trainingMode%27%27%20to%20true%20and%20provide%20inputs%2C%20then%20the%0A%20*%20%20inputs%20will%20be%20recorded%20in%20the%20%27%27correctValues%27%27%20parameters.%0A%20*%20%20Otherwise%2C%20the%20inputs%20will%20be%20compared%20against%20those%20in%20the%0A%20*%20%20%27%27correctValue%27%27%20parameter.%0A%20*%0A%20*%20%20@accessor%20test/TrainableTest%0A%20*%20%20@input%20input%20The%20input%20value.%0A%20*%20%20@output%20output%20False%20as%20long%20as%20there%20is%20data%20to%20compare%20against%20the%20input%0A%20*%20%20@param%20correctValues%20a%20JSON%20array%20of%20the%20correct%20values.%0A%20*%20%20@param%20trainingMode%20true%20if%20the%20input%20is%20being%20trained.%0A%20*%20%20@author%20Christopher%20Brooks%20based%20on%20the%20Ptolemy%20NonStrictTest%20actor%20by%20Paul%20Whitaker%2C%20Christopher%20Hylands%2C%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TrainableTest.js%201720%202017-05-18%2022%3A42%3A06Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20console%2C%20exports*/%0A/*jshint%20globalstrict%3A%20true*/%0A/*jslint%20plusplus%3A%20true%20*/%0A%27use%20strict%27%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27correctValues%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%5B0%5D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27input%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27tolerance%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200.000000001%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27trainingMode%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20false%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A//%20Input%2C%20parameter%20and%20variable%20names%20match%20those%20in%20%24PTII/ptolemy/actor/lib/NonStrictTest.java%0A%0A//%20Set%20to%20true%20if%20an%20input%20is%20handled.%20%20If%20no%20inputs%20are%20handled%2C%20then%0A//%20throw%20an%20exception%20in%20wrapup%28%29.%0Avar%20inputHandled%20%3D%20false%3B%0A%0A//%20Set%20to%20true%20when%20initialize%28%29%20is%20called.%0Avar%20initialized%20%3D%20false%3B%0A%0A//%20The%20number%20of%20input%20tokens%20that%20have%20been%20read%20in.%0Avar%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A//%20If%20trainingMode%20is%20true%2C%20then%20inputs%20that%20have%20been%20seen%20so%20far.%0Avar%20trainingTokens%20%3D%20%5B%5D%3B%0A%0A//%20Set%20to%20false%20in%20initialize%28%29%20and%20true%20at%20the%20end%20of%20wrapup%28%29.%0A//%20FIXME%3A%20We%20should%20have%20an%20exit%20hook%20that%20checks%20that%20wrapup%28%29%20is%20called%20for%20all%20the%20actors.%0Avar%20wrappedUp%20%3D%20false%3B%0A%0A//%20So%20we%20can%20test%20this%20in%20hosts/node/test/mocha/testMain.js%20to%20test%20that%20wrapup%20was%20called.%0Aexports.wrappedUp%20%3D%20wrappedUp%3B%0A%0A/**%20Create%20an%20input%20handler%20to%20compare%20the%20input%20with%20the%20appropriate%20element%28s%29%0A%20*%20%20from%20correctValues.%0A%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//console.log%28%22Test%20initialize%28%29%3A%20typeof%20correctValues%3A%20%22%20+%20typeof%20this.getParameter%28%27correctValues%27%29%29%0A%20%20%20%20var%20inputValueValue%2C%0A%20%20%20%20%20%20%20%20self%20%3D%20this%3B%0A%0A%20%20%20%20trainingTokens%20%3D%20%5B%5D%3B%0A%20%20%20%20exports.wrappedUp%20%3D%20false%3B%0A%20%20%20%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A%20%20%20%20this.addInputHandler%28%27input%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20cache%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20%3D%20self.get%28%27input%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%3B%0A%20%20%20%20%20%20%20%20inputHandled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20//%20If%20the%20input%20is%20not%20connected%2C%20then%20inputValue%20will%20be%20null.%0A%20%20%20%20%20%20%20%20if%20%28self.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20trainingTokens.push%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20self.getParameter%28%27correctValues%27%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceToken%20%3D%20correctValuesValues%5BnumberOfInputTokensSeen%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//console.log%28%22Test%3A%20%22%20+%20numberOfInputTokensSeen%20+%20%22%2C%20input%3A%20%22%20+%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20//+%20%22%2C%20referenceToken%3A%20%22%20+%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%20%26%26%20typeof%20inputValue%20%21%3D%3D%20%27string%27%20%26%26%20typeof%20inputValue%20%21%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20value%20of%20the%20input%20was%20null%3F%20%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Perhaps%20the%20input%20is%20not%20connected%3F%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20neither%20a%20number%20nor%20a%20string%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27%20with%20value%20%27%20+%20inputValueValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20the%20input%20not%20a%20number%2C%20then%20throw%20an%20error.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20the%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27.%20%20The%20expected%20value%20was%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20difference%20%3D%20Math.abs%28inputValue%20-%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isNaN%28difference%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20absolute%20value%20of%20the%20input%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20+%20%27%22%20-%20the%20referenceToken%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%20is%20NaN%3F%20%20It%20should%20be%20less%20than%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28difference%20%3E%20self.getParameter%28%27tolerance%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20not%20within%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20of%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20devices/test/auto/WatchEmulator.js%20needs%20this%20test%20for%20object%20because%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20we%20receive%20a%20JSON%20object%2C%20then%20we%20should%20try%20to%20stringify%20it.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22.%20%20The%20input%20was%20an%20object%2C%20and%20a%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValueValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22.%20%20The%20input%20was%20an%20object%20and%20JSON.stringify%28%29%20did%20not%20throw%20an%20exception.%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27A%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceTokenValue%20%3D%20JSON.stringify%28referenceToken%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20comparing%20longs%20from%20CapeCode%2C%20then%20the%20values%20will%20be%20like%20%221L%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20and%20stringify%20will%20return%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceToken%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceTokenValue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20inputValueValue%20could%20still%20be%20undefined%20here%20if%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20was%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20undefined%20%26%26%20inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%21%3D%3D%20undefined%20%26%26%20referenceTokenValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceTokenValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Deal%20with%20referenceTokens%20with%20value%201L.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValueValue%20%21%3D%3D%20%27object%27%20%7C%7C%20typeof%20referenceTokenValue%20%21%3D%3D%20%27object%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue.toString%28%29%20%21%3D%3D%20referenceTokenValue.toString%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20%21%3D%3D%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20+%20%27%22%20typeof%20inputValueValue%3A%20%27%20+%20typeof%20inputValueValue%20+%20%27%20typeof%20referenceTokenValue%3A%20%27%20+%20typeof%20referenceTokenValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20referenceToken%20%22%27%20+%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20past%20the%20end%20of%20the%20expected%20inputs%2C%20then%20read%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3E%3D%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20initialized%20%3D%20true%3B%0A%7D%3B%0A%0A/**%20If%20trainingMode%20is%20true%2C%20then%20updated%20the%20correctValues.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28this.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20this.setParameter%28%27correctValues%27%2C%20trainingTokens%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28initialized%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21inputHandled%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20input%20handler%20of%20this%20accessor%20was%20never%20invoked.%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Usually%2C%20this%20is%20an%20error%20indicating%20that%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27starvation%20is%20occurring.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20this.getParameter%28%27correctValues%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20test%20produced%20only%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20yet%20the%20correctValues%20parameter%20was%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27expecting%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20correctValuesValues.length%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20name%20%3D%20this.accessorName%3B%0A%0A%20%20%20%20//%20FIXME%3A%20Should%20we%20check%20to%20see%20if%20the%20name%20has%20no%20dots%20in%20and%20if%0A%20%20%20%20//%20it%20does%20not%2C%20add%20the%20container%20name%3F%0A%0A%20%20%20%20//if%20%28this.container%29%20%7B%0A%20%20%20%20//%20%20%20%20name%20%3D%20this.container.accessorName%20+%20%22.%22%20+%20name%3B%0A%20%20%20%20//%7D%0A%0A%20%20%20%20//%0A%20%20%20%20exports.wrappedUp%20%3D%20true%3B%0A%20%20%20%20//%20console.log%28%22TrainableTest.js%3A%20wrapup%28%29%20finished%3A%20%22%20+%20name%20+%20%22%2C%20exports.wrappedUp%3A%20%22%20+%20exports.wrappedUp%29%3B%0A%0A%7D%3B%0A'));
    TrainableTest2.setParameter('correctValues', ["1","2","3"]);
    TrainableTest2.setParameter('trainingMode', false);
    TrainableTest2.setParameter('tolerance', 1.0E-9);

    // Start: GDPLogRead: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: GDPLogRead: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var GDPLogRead = this.instantiateFromCode('GDPLogRead', unescape('/*%20Read%20a%20log.%20*/%0A%0A//%20Copyright%20%28c%29%202015-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Read%20a%20log%20from%20the%20Global%20Data%20Plane%20%28GDP%29.%0A%20*%0A%20*%20%20@output%20%7Bstring%7D%20data%20The%20data%20that%20is%20read%20from%20the%20log%0A%20*%0A%20*%20%20@param%20%7Bstring%7D%20logname%20The%20GDP%20logname.%20%20By%20convention%2C%20use%0A%20*%20%20a%20reverse%20fully%20qualified%20name%20like%0A%20*%20%20%22org.terraswarm.accessors.demo.MyDemoName%22%0A%20*%20%20%20See%20the%20%5BGDP%20Infrastructure%20wiki%5B%28https%3A//gdp.cs.berkeley.edu/redmine/projects/gdp-sensor-and-actuator-deployments/wiki/Berkeley_Sensor_Deployments%29%0A%20*%20%20%20for%20a%20list%20of%20GDP%20logs.%0A%20*%0A%20*%20%20@param%20%7Bstring%7D%20logdname%20The%20name%20of%20the%20logd%20server.%20%20If%20empty%2C%0A%20*%20%20then%20the%20hostname%20of%20the%20local%20machine%20is%20used.%0A%20*%0A%20*%20%20@input%20trigger%20An%20input%20that%20triggers%20firing%20the%20reading%20of%20the%20data.%0A%20*%0A%20*%20%20@input%20%7Bint%7D%20recno%20The%20record%20number%20to%20be%20read.%20%20In%20the%20GDP%2C%0A%20*%20%20the%20first%20record%20is%20record%201.%0A%20*%0A%20*%20%20@parameter%20%7Bstring%7D%20debugLevel%20The%20value%20of%20the%20GDP%20debug%20flag.%0A%20*%20%20See%20gdp/README-developers.md%20for%20a%20complete%20summary.%20%20The%20value%20is%0A%20*%20%20typically%20%22pattern%3Dlevel%22%2C%20for%20example%20%22gdplogd.physlog%3D39%22.%20%20To%0A%20*%20%20see%20the%20patterns%2C%20use%20the%20%22what%22%20command%20or%20strings%0A%20*%20%20%24PTII/lib/libgdp*%20%7C%20grep%20%27@%28%23%29%27.%20%20Use%20%22*%3D40%22%20to%20set%20the%20debug%0A%20*%20%20level%20to%2040%20for%20all%20components.%20The%20value%20of%20level%20is%20not%20usually%0A%20*%20%20over%20127.%20%20Values%20over%20100%20may%20modify%20the%20behavior.%0A%20*%0A%20*%20%20@accessor%20gdp/GDPLogRead%0A%20*%20%20@author%20Edward%20A.%20Lee%2C%20Nitesh%20Mor.%20Contributor%3A%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogRead.js%201883%202017-06-17%2023%3A59%3A38Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20addInputHandler%2C%20console%2C%20exports%2C%20get%2C%20getParameter%2C%20input%2C%20output%2C%20parameter%2C%20removeInputHandler%2C%20require%2C%20send%20*/%0A/*jshint%20globalstrict%3A%20true%20*/%0A%22use%20strict%22%3B%0A%0Avar%20GDP%20%3D%20require%28%27@accessors-modules/gdp%27%29%3B%0Avar%20handle%20%3D%20null%3B%0Avar%20log%20%3D%20null%3B%0Avar%20oldLogname%20%3D%20null%3B%0A%0A/**%20Setup%20the%20parameters%20and%20ports.%20*/%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.output%28%27data%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27debugLevel%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27org.terraswarm.accessors.demo.MyDemoName%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logdname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27edu.berkeley.eecs.gdp-01.gdplogd%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%20%20%20%20this.input%28%27recno%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27int%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A/**%20Read%20a%20record%20and%20send%20the%20data%20on%20the%20output.%0A%20*%20%20Note%20that%20if%20the%20log%20does%20not%20exist%2C%20it%20will%20be%20created%0A%20*%20%20and%20a%20null%20will%20be%20sent.%0A%20*/%0Aexports.read%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20recno%20%3D%20this.get%28%27recno%27%29%2C%0A%20%20%20%20%20%20%20%20logname%20%3D%20this.get%28%27logname%27%29%2C%0A%20%20%20%20%20%20%20%20logdname%2C%20data%3B%0A%20%20%20%20console.log%28%22GDPLogRead.read%28%22%20+%20recno%20+%20%22%29%3A%20start%22%29%3B%0A%20%20%20%20if%20%28logname%20%3D%3D%3D%20%27%27%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20logname%20parameter%20cannot%20be%20empty.%27%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28logname%20%21%3D%3D%20oldLogname%29%20%7B%0A%20%20%20%20%20%20%20%20console.log%28%22GDPLogRead.read%28%22%20+%20recno%20+%20%22%29%3A%20About%20to%20call%20new%20GDP.GDP%28%29%22%29%3B%0A%20%20%20%20%20%20%20%20logdname%20%3D%20this.get%28%27logdname%27%29%3B%0A%20%20%20%20%20%20%20%20log%20%3D%20new%20GDP.GDP%28logname%2C%201%2C%20logdname%29%3B%0A%20%20%20%20%20%20%20%20log.setDebugLevel%28this.getParameter%28%27debugLevel%27%29%29%3B%0A%20%20%20%20%20%20%20%20oldLogname%20%3D%20logname%3B%0A%20%20%20%20%7D%0A%20%20%20%20//%20FIXME%3A%20If%20recno%20%3D%3D%200%2C%20then%20calling%20new%20GDP.GDP%28%29%20and%20then%20trying%20to%20read%20results%20in%20%27ERROR%3A%20404%20not%20found%20%5BBerkeley%3ASwarm-GDP%3A404%5D%27%0A%20%20%20%20if%20%28recno%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20console.log%28%22GDPLogRead.read%28%22%20+%20recno%20+%20%22%29%3A%20recno%20was%200%2C%20sending%20nil%22%29%3B%0A%20%20%20%20%20%20%20%20this.send%28%27data%27%2C%20%27nil%27%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20data%20%3D%20log.read%28recno%29%3B%0A%20%20%20%20%20%20%20%20console.log%28%22GDPLogRead.read%28%22%20+%20recno%20+%20%22%29%3A%20sending%20%22%20+%20data%29%3B%0A%20%20%20%20%20%20%20%20this.send%28%27data%27%2C%20data%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A/**%20Add%20an%20input%20handler%20that%20will%20read%20data.%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20oldLogname%20%3D%20null%3B%0A%20%20%20%20handle%20%3D%20this.addInputHandler%28%27trigger%27%2C%20this.exports.read.bind%28this%29%29%3B%0A%7D%3B%0A%0A/**%20Remove%20the%20input%20handler.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28log%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20log.close%28%29%3B%0A%20%20%20%20%20%20%20%20//%20The%20GDP%20close%28%29%20method%20has%20a%20significant%20bug%20where%20calling%0A%20%20%20%20%20%20%20%20//%20close%28%29%20twice%20might%20abort%20or%20segfault.%0A%20%20%20%20%20%20%20%20log%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28handle%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20this.removeInputHandler%28handle%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    GDPLogRead.setParameter('debugLevel', "");
    GDPLogRead.setDefault('logname', "myLog");
    GDPLogRead.setDefault('logdname', "edu.berkeley.eecs.gdp-01.gdplogd");

    // Start: GDPLogCreate: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: GDPLogCreate: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var GDPLogCreate = this.instantiateFromCode('GDPLogCreate', unescape('/*%20Create%20a%20Global%20Data%20Plane%20%28GDP%29%20log.%20*/%0A%0A//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Create%20a%20Global%20Data%20Plane%20%28GDP%29%20log.%0A%20*%0A%20*%20%20@accessor%20gdp/GDPLogCreate%0A%20*%20%20@parameter%20%7Bstring%7D%20debugLevel%20The%20value%20of%20the%20GDP%20debug%20flag.%20%20See%0A%20*%20%20gdp/README.md%20for%20a%20complete%20summary.%20%20The%20value%20is%20typically%0A%20*%20%20%22pattern%3Dlevel%22%2C%20for%20example%20%22gdplogd.physlog%3D39%22.%20%20To%20see%20the%0A%20*%20%20patterns%2C%20use%20the%20%22what%22%20command%20or%20strings%20%24PTII/lib/libgdp*%20%7C%0A%20*%20%20grep%20%27@%28%23%29%27.%20%20Use%20%22*%3D40%22%20to%20set%20the%20debug%20level%20to%2040%20for%20all%0A%20*%20%20components.%20The%20value%20of%20level%20is%20not%20usually%20over%20127.%20%20Values%0A%20*%20%20over%20100%20may%20modify%20the%20behavior.%0A%20*%20%20@input%20%7Bstring%7D%20logname%20The%20GDP%20logname.%20%20By%20convention%2C%20use%0A%20*%20%20a%20reverse%20fully%20qualified%20name%20like%0A%20*%20%20%22org.ptolemy.actor.lib.jjs.modules.gdp.demo.GDPLogRead.GDPLogRead%22%0A%20*%20%20@input%20%7Bstring%7D%20logdname%20The%20IP%20address%20or%20DNS%20name%20of%20the%20gdp%0A%20*%20%20router.%20%20If%20empty%2C%20then%20the%20swarm.gdp.routers%20key%20is%20searched%20for%0A%20*%20%20in%20the%20gdp%20configuration%20file%20ep_adm_para%2C%20in%20the%20following%20order%0A%20*%20%20%22%60.ep_adm_params%3A%7E/.ep_adm_params%3A/usr/local/etc/ep_adm_params%3A/etc/ep_adm_params%60%22%0A%20*%20%20The%20values%20of%20swarm.gdp.routers%20are%20then%20contacted%20in%20order.%0A%20*%20%20@input%20trigger%20An%20input%20that%20triggers%20firing%20the%20reading%20of%20the%20data%0A%20*%20%20@output%20output%20An%20output%20that%20is%20written%20to%20when%20the%20creation%20is%20complete.%0A%20*%0A%20*%20%20@author%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogCreate.js%201597%202017-04-29%2015%3A41%3A50Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20addInputHandler%2C%20addInputParameter%2C%20console%2C%20exports%2C%20get%2C%20getParameter%2C%20input%2C%20parameter%2C%20removeInputHandler%2C%20require%20*/%0A/*jshint%20globalstrict%3A%20true%20*/%0A%22use%20strict%22%3B%0A%0Avar%20GDP%20%3D%20require%28%27@accessors-modules/gdp%27%29%3B%0Avar%20log%20%3D%20null%3B%0Avar%20handle%20%3D%20null%3B%0A%0A/**%20Setup%20the%20parameters%20and%20ports.%20*/%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27debugLevel%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27myLog%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logdname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%7D%3B%0A%0A/**%20If%20the%20log%20is%20not%20present%2C%20then%20create%20it.%0A%20*/%0Aexports.create%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20console.log%28%22GDPLogCreate.js%3A%20create%28%29%20Start.%22%29%3B%0A%20%20%20%20var%20logname%20%3D%20this.get%28%27logname%27%29%2C%0A%20%20%20%20%20%20%20%20logdname%3B%0A%20%20%20%20if%20%28logname%20%3D%3D%3D%20%27%27%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20logname%20parameter%20cannot%20be%20empty.%27%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20logdname%20%3D%20this.get%28%27logdname%27%29%3B%0A%20%20%20%20log%20%3D%20new%20GDP.GDP%28logname%2C%203%2C%20logdname%29%3B%0A%20%20%20%20log.setDebugLevel%28this.getParameter%28%27debugLevel%27%29%29%3B%0A%20%20%20%20this.send%28%27output%27%2C%20logname%29%3B%0A%20%20%20%20console.log%28%22%5CnGDPLogCreate.js%3A%20create%28%29%20Done%21%22%29%3B%0A%7D%3B%0A%0A/**%20Add%20an%20input%20handler%20that%20will%20create%20the%20log.%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20console.log%28%22GDPLogCreate.js%3A%20initialize%28%29%22%29%3B%0A%20%20%20%20handle%20%3D%20this.addInputHandler%28%27trigger%27%2C%20this.exports.create.bind%28this%29%29%3B%0A%7D%3B%0A%0A/**%20Remove%20the%20input%20handler.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28log%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20log.close%28%29%3B%0A%20%20%20%20%20%20%20%20//%20The%20GDP%20close%28%29%20method%20has%20a%20significant%20bug%20where%20calling%0A%20%20%20%20%20%20%20%20//%20close%28%29%20twice%20might%20abort%20or%20segfault.%0A%20%20%20%20%20%20%20%20log%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28handle%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20this.removeInputHandler%28handle%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    GDPLogCreate.setParameter('debugLevel', "*=1");
    GDPLogCreate.setDefault('logname', "mylog1");
    GDPLogCreate.setDefault('logdname', "edu.berkeley.eecs.gdp-01.gdplogd");

    // Start: TestSpontaneous: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TestSpontaneous: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TestSpontaneous = this.instantiateFromCode('TestSpontaneous', unescape('//%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A//%0A//%20Copyright%20%28c%29%202015-2016%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A%20*%20%20This%20implementation%20produces%20a%20counting%20sequence.%0A%20*%0A%20*%20%20@accessor%20test/TestSpontaneous%0A%20*%20%20@parameter%20interval%20The%20interval%20between%20outputs%20in%20milliseconds.%0A%20*%20%20@output%20output%20Output%20for%20the%20counting%20sequence%2C%20of%20type%20number.%0A%20*%20%20@author%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TestSpontaneous.js%201117%202016-11-23%2000%3A59%3A47Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20clearInterval%2C%20exports%2C%20require%2C%20setInterval%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27interval%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%201000%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A//%20These%20variables%20will%20not%20be%20visible%20to%20subclasses.%0Avar%20handle%20%3D%20null%3B%0Avar%20count%20%3D%200%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20count%20%3D%200%3B%0A%20%20%20%20//%20Need%20to%20record%20%27this%27%20for%20use%20in%20the%20callback.%0A%20%20%20%20var%20thiz%20%3D%20this%3B%0A%20%20%20%20handle%20%3D%20setInterval%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20thiz.send%28%27output%27%2C%20count%29%3B%0A%20%20%20%20%20%20%20%20count%20+%3D%201%3B%0A%20%20%20%20%7D%2C%20this.getParameter%28%27interval%27%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28handle%29%20%7B%0A%20%20%20%20%20%20%20%20clearInterval%28handle%29%3B%0A%20%20%20%20%20%20%20%20handle%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    TestSpontaneous.setParameter('interval', 2000.0);

    // Start: JavaScriptRamp: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptRamp = this.instantiateFromCode('JavaScriptRamp', unescape('/**%20Output%20a%20sequence%20with%20a%20given%20step%20in%20values.%0A%20*%0A%20*%20%20@accessor%20JavaScriptRamp%0A%20*%20%20@param%20init%20The%20value%20produced%20on%20its%20first%20iteration.%20%20The%0A%20*%20%20initial%20default%20is%200.%0A%20*%20%20@input%20trigger%20The%20trigger%0A%20*%20%20@output%20output%20The%20output%0A%20*%20%20@param%20step%20The%20amount%20by%20which%20the%20output%20is%20incremented.%20The%0A%20*%20%20default%20is%201.%0A%20*%20%20@author%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogRead.xml%2075037%202016-08-11%2021%3A29%3A55Z%20cxh%20%24%24%0A%20*/%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20//%20FIXME%3A%20this%20only%20supports%20numbers%2C%20unlike%20the%20Cape%20Code%20Ramp%0A%20%20%20%20//%20actor%2C%20which%20supports%20many%20types.%0A%20%20%20%20this.parameter%28%27init%27%2C%20%7B%27type%27%3A%27number%27%2C%20%27value%27%3A0%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%27type%27%3A%27number%27%7D%29%3B%0A%20%20%20%20this.parameter%28%27step%27%2C%20%7B%27type%27%3A%27number%27%2C%20%27value%27%3A1%7D%29%3B%0A%7D%3B%0A%0Avar%20_lastValue%20%3D%200%3B%0A%0Aexports.initialize%20%3D%20function%28%29%20%7B%0A%20%20%20%20_lastValue%20%3D%20this.getParameter%28%27init%27%29%3B%0A%7D%0Aexports.fire%20%3D%20function%28%29%20%7B%0A%20%20%20%20_lastValue%20+%3D%20this.getParameter%28%27step%27%29%3B%0A%20%20%20%20this.send%28%27output%27%2C%20_lastValue%29%3B%0A%7D%3B'));
    JavaScriptRamp.setParameter('init', 0.0);
    JavaScriptRamp.setParameter('step', 1.0);

    // Start: TestSpontaneous2: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TestSpontaneous2: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TestSpontaneous2 = this.instantiateFromCode('TestSpontaneous2', unescape('//%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A//%0A//%20Copyright%20%28c%29%202015-2016%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A%20*%20%20This%20implementation%20produces%20a%20counting%20sequence.%0A%20*%0A%20*%20%20@accessor%20test/TestSpontaneous%0A%20*%20%20@parameter%20interval%20The%20interval%20between%20outputs%20in%20milliseconds.%0A%20*%20%20@output%20output%20Output%20for%20the%20counting%20sequence%2C%20of%20type%20number.%0A%20*%20%20@author%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TestSpontaneous.js%201117%202016-11-23%2000%3A59%3A47Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20clearInterval%2C%20exports%2C%20require%2C%20setInterval%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27interval%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%201000%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A//%20These%20variables%20will%20not%20be%20visible%20to%20subclasses.%0Avar%20handle%20%3D%20null%3B%0Avar%20count%20%3D%200%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20count%20%3D%200%3B%0A%20%20%20%20//%20Need%20to%20record%20%27this%27%20for%20use%20in%20the%20callback.%0A%20%20%20%20var%20thiz%20%3D%20this%3B%0A%20%20%20%20handle%20%3D%20setInterval%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20thiz.send%28%27output%27%2C%20count%29%3B%0A%20%20%20%20%20%20%20%20count%20+%3D%201%3B%0A%20%20%20%20%7D%2C%20this.getParameter%28%27interval%27%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28handle%29%20%7B%0A%20%20%20%20%20%20%20%20clearInterval%28handle%29%3B%0A%20%20%20%20%20%20%20%20handle%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    TestSpontaneous2.setParameter('interval', 3000.0);

    // Start: JavaScriptRamp2: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptRamp2 = this.instantiateFromCode('JavaScriptRamp2', unescape('/**%20Output%20a%20sequence%20with%20a%20given%20step%20in%20values.%0A%20*%0A%20*%20%20@accessor%20test/TestRamp%0A%20*%20%20@param%20init%20The%20value%20produced%20on%20its%20first%20iteration.%20%20The%0A%20*%20%20initial%20default%20is%200.%0A%20*%20%20@input%20trigger%20The%20trigger%0A%20*%20%20@output%20output%20The%20output%0A%20*%20%20@param%20step%20The%20amount%20by%20which%20the%20output%20is%20incremented.%20The%0A%20*%20%20default%20is%201.%0A%20*%20%20@author%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogRead.xml%2075037%202016-08-11%2021%3A29%3A55Z%20cxh%20%24%24%0A%20*/%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20//%20FIXME%3A%20this%20only%20supports%20numbers%2C%20unlike%20the%20Cape%20Code%20Ramp%0A%20%20%20%20//%20actor%2C%20which%20supports%20many%20types.%0A%20%20%20%20this.parameter%28%27init%27%2C%20%7B%27type%27%3A%27number%27%2C%20%27value%27%3A0%7D%29%3B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%27type%27%3A%27number%27%7D%29%3B%0A%20%20%20%20this.parameter%28%27step%27%2C%20%7B%27type%27%3A%27number%27%2C%20%27value%27%3A1%7D%29%3B%0A%7D%3B%0A%0Avar%20_lastValueJavaScriptRamp2%20%3D%200%3B%0A%0Aexports.initialize%20%3D%20function%28%29%20%7B%0A%20%20%20%20_lastValueJavaScriptRamp2%20%3D%20this.getParameter%28%27init%27%29%3B%0A%7D%0Aexports.fire%20%3D%20function%28%29%20%7B%0A%20%20%20%20_lastValueJavaScriptRamp2%20+%3D%20this.getParameter%28%27step%27%29%3B%0A%20%20%20%20this.send%28%27output%27%2C%20_lastValueJavaScriptRamp2%29%3B%0A%7D%3B'));
    JavaScriptRamp2.setParameter('init', 0.0);
    JavaScriptRamp2.setParameter('step', 1.0);

    // Start: TrainableTest: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TrainableTest: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TrainableTest = this.instantiateFromCode('TrainableTest', unescape('//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A/**%20Compare%20the%20input%20with%20a%20known%20good%20input.%0A%20*%20%20If%20you%20set%20%27%27trainingMode%27%27%20to%20true%20and%20provide%20inputs%2C%20then%20the%0A%20*%20%20inputs%20will%20be%20recorded%20in%20the%20%27%27correctValues%27%27%20parameters.%0A%20*%20%20Otherwise%2C%20the%20inputs%20will%20be%20compared%20against%20those%20in%20the%0A%20*%20%20%27%27correctValue%27%27%20parameter.%0A%20*%0A%20*%20%20@accessor%20test/TrainableTest%0A%20*%20%20@input%20input%20The%20input%20value.%0A%20*%20%20@output%20output%20False%20as%20long%20as%20there%20is%20data%20to%20compare%20against%20the%20input%0A%20*%20%20@param%20correctValues%20a%20JSON%20array%20of%20the%20correct%20values.%0A%20*%20%20@param%20trainingMode%20true%20if%20the%20input%20is%20being%20trained.%0A%20*%20%20@author%20Christopher%20Brooks%20based%20on%20the%20Ptolemy%20NonStrictTest%20actor%20by%20Paul%20Whitaker%2C%20Christopher%20Hylands%2C%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TrainableTest.js%201720%202017-05-18%2022%3A42%3A06Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint%20and%20jshint.%20%20Note%20that%20there%20should%0A//%20be%20no%20space%20between%20the%20/%20and%20the%20*%20and%20global.%20See%0A//%20https%3A//chess.eecs.berkeley.edu/ptexternal/wiki/Main/JSHint%20*/%0A/*globals%20console%2C%20exports*/%0A/*jshint%20globalstrict%3A%20true*/%0A/*jslint%20plusplus%3A%20true%20*/%0A%27use%20strict%27%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27correctValues%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%5B0%5D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27input%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27tolerance%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200.000000001%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27trainingMode%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27boolean%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20false%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A//%20Input%2C%20parameter%20and%20variable%20names%20match%20those%20in%20%24PTII/ptolemy/actor/lib/NonStrictTest.java%0A%0A//%20Set%20to%20true%20if%20an%20input%20is%20handled.%20%20If%20no%20inputs%20are%20handled%2C%20then%0A//%20throw%20an%20exception%20in%20wrapup%28%29.%0Avar%20inputHandled%20%3D%20false%3B%0A%0A//%20Set%20to%20true%20when%20initialize%28%29%20is%20called.%0Avar%20initialized%20%3D%20false%3B%0A%0A//%20The%20number%20of%20input%20tokens%20that%20have%20been%20read%20in.%0Avar%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A//%20If%20trainingMode%20is%20true%2C%20then%20inputs%20that%20have%20been%20seen%20so%20far.%0Avar%20trainingTokens%20%3D%20%5B%5D%3B%0A%0A//%20Set%20to%20false%20in%20initialize%28%29%20and%20true%20at%20the%20end%20of%20wrapup%28%29.%0A//%20FIXME%3A%20We%20should%20have%20an%20exit%20hook%20that%20checks%20that%20wrapup%28%29%20is%20called%20for%20all%20the%20actors.%0Avar%20wrappedUp%20%3D%20false%3B%0A%0A//%20So%20we%20can%20test%20this%20in%20hosts/node/test/mocha/testMain.js%20to%20test%20that%20wrapup%20was%20called.%0Aexports.wrappedUp%20%3D%20wrappedUp%3B%0A%0A/**%20Create%20an%20input%20handler%20to%20compare%20the%20input%20with%20the%20appropriate%20element%28s%29%0A%20*%20%20from%20correctValues.%0A%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//console.log%28%22Test%20initialize%28%29%3A%20typeof%20correctValues%3A%20%22%20+%20typeof%20this.getParameter%28%27correctValues%27%29%29%0A%20%20%20%20var%20inputValueValue%2C%0A%20%20%20%20%20%20%20%20self%20%3D%20this%3B%0A%0A%20%20%20%20trainingTokens%20%3D%20%5B%5D%3B%0A%20%20%20%20exports.wrappedUp%20%3D%20false%3B%0A%20%20%20%20numberOfInputTokensSeen%20%3D%200%3B%0A%0A%20%20%20%20this.addInputHandler%28%27input%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20cache%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20%3D%20self.get%28%27input%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%3B%0A%20%20%20%20%20%20%20%20inputHandled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20//%20If%20the%20input%20is%20not%20connected%2C%20then%20inputValue%20will%20be%20null.%0A%20%20%20%20%20%20%20%20if%20%28self.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20trainingTokens.push%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20self.getParameter%28%27correctValues%27%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceToken%20%3D%20correctValuesValues%5BnumberOfInputTokensSeen%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//console.log%28%22Test%3A%20%22%20+%20numberOfInputTokensSeen%20+%20%22%2C%20input%3A%20%22%20+%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20//+%20%22%2C%20referenceToken%3A%20%22%20+%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%20%26%26%20typeof%20inputValue%20%21%3D%3D%20%27string%27%20%26%26%20typeof%20inputValue%20%21%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20value%20of%20the%20input%20was%20null%3F%20%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Perhaps%20the%20input%20is%20not%20connected%3F%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20input%20%22%27%20+%20inputValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20neither%20a%20number%20nor%20a%20string%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27%20with%20value%20%27%20+%20inputValueValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20the%20input%20not%20a%20number%2C%20then%20throw%20an%20error.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%21%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20the%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20inputValue%20+%20%27.%20%20The%20expected%20value%20was%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20difference%20%3D%20Math.abs%28inputValue%20-%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isNaN%28difference%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20absolute%20value%20of%20the%20input%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValue%20+%20%27%22%20-%20the%20referenceToken%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%20is%20NaN%3F%20%20It%20should%20be%20less%20than%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28difference%20%3E%20self.getParameter%28%27tolerance%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20not%20within%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.getParameter%28%27tolerance%27%29%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20of%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20devices/test/auto/WatchEmulator.js%20needs%20this%20test%20for%20object%20because%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20if%20we%20receive%20a%20JSON%20object%2C%20then%20we%20should%20try%20to%20stringify%20it.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValue%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%20%27%22.%20%20The%20input%20was%20an%20object%2C%20and%20a%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceToken%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValueValue%20+%20%27%22%20is%20%21%3D%3D%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22.%20%20The%20input%20was%20an%20object%20and%20JSON.stringify%28%29%20did%20not%20throw%20an%20exception.%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27A%20string%20was%20expected.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20referenceToken%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20JSON.stringify%28inputValue%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20referenceTokenValue%20%3D%20JSON.stringify%28referenceToken%2C%20function%20%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27object%27%20%26%26%20value%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cache.indexOf%28value%29%20%21%3D%3D%20-1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Circular%20reference%20found%2C%20discard%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Store%20value%20in%20our%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache.push%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%20%3D%20null%3B%20//%20Enable%20garbage%20collection%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20comparing%20longs%20from%20CapeCode%2C%20then%20the%20values%20will%20be%20like%20%221L%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20and%20stringify%20will%20return%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceToken%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20referenceTokenValue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20inputValueValue%20could%20still%20be%20undefined%20here%20if%20inputValue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20was%20undefined.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inputValueValue%20%21%3D%3D%20undefined%20%26%26%20inputValueValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue%20%3D%20inputValueValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28referenceTokenValue%20%21%3D%3D%20undefined%20%26%26%20referenceTokenValue.length%20%3E%20100%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20%3D%20referenceTokenValue.substring%280%2C%20100%29%20+%20%27...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Deal%20with%20referenceTokens%20with%20value%201L.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20inputValueValue%20%21%3D%3D%20%27object%27%20%7C%7C%20typeof%20referenceTokenValue%20%21%3D%3D%20%27object%27%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputValueValue.toString%28%29%20%21%3D%3D%20referenceTokenValue.toString%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20The%20input%20%22%27%20+%20inputValueValue%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20%21%3D%3D%20to%20the%20expected%20value%20%22%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20referenceTokenValue%20+%20%27%22%20typeof%20inputValueValue%3A%20%27%20+%20typeof%20inputValueValue%20+%20%27%20typeof%20referenceTokenValue%3A%20%27%20+%20typeof%20referenceTokenValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28self.accessorName%20+%20%27%3A%20After%20seeing%20%27%20+%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20the%20referenceToken%20%22%27%20+%20referenceToken%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%22%20is%20not%20a%20number%2C%20it%20is%20a%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20referenceToken%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20If%20we%20are%20past%20the%20end%20of%20the%20expected%20inputs%2C%20then%20read%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3E%3D%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27output%27%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20initialized%20%3D%20true%3B%0A%7D%3B%0A%0A/**%20If%20trainingMode%20is%20true%2C%20then%20updated%20the%20correctValues.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28this.getParameter%28%27trainingMode%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20this.setParameter%28%27correctValues%27%2C%20trainingTokens%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28initialized%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21inputHandled%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20input%20handler%20of%20this%20accessor%20was%20never%20invoked.%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Usually%2C%20this%20is%20an%20error%20indicating%20that%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27starvation%20is%20occurring.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20correctValuesValues%20%3D%20this.getParameter%28%27correctValues%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28numberOfInputTokensSeen%20%3C%20correctValuesValues.length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28this.accessorName%20+%20%27%3A%20The%20test%20produced%20only%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20numberOfInputTokensSeen%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%2C%20yet%20the%20correctValues%20parameter%20was%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27expecting%20%27%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20correctValuesValues.length%20+%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%20tokens%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20initialized%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20name%20%3D%20this.accessorName%3B%0A%0A%20%20%20%20//%20FIXME%3A%20Should%20we%20check%20to%20see%20if%20the%20name%20has%20no%20dots%20in%20and%20if%0A%20%20%20%20//%20it%20does%20not%2C%20add%20the%20container%20name%3F%0A%0A%20%20%20%20//if%20%28this.container%29%20%7B%0A%20%20%20%20//%20%20%20%20name%20%3D%20this.container.accessorName%20+%20%22.%22%20+%20name%3B%0A%20%20%20%20//%7D%0A%0A%20%20%20%20//%0A%20%20%20%20exports.wrappedUp%20%3D%20true%3B%0A%20%20%20%20//%20console.log%28%22TrainableTest.js%3A%20wrapup%28%29%20finished%3A%20%22%20+%20name%20+%20%22%2C%20exports.wrappedUp%3A%20%22%20+%20exports.wrappedUp%29%3B%0A%0A%7D%3B%0A'));
    TrainableTest.setParameter('correctValues', ["1","2"]);
    TrainableTest.setParameter('trainingMode', false);
    TrainableTest.setParameter('tolerance', 1.0E-9);

    // Start: JavaScriptGDPLogName: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var JavaScriptGDPLogName = this.instantiateFromCode('JavaScriptGDPLogName', unescape('/**%20Generate%20a%20GDP%20log%20name%20that%20has%20a%20random%20suffix.%0A%20*%0A%20*%20%20@accessor%20JavaScriptGDPLogName%0A%20*%20%20@input%20trigger%20The%20trigger%0A%20*%20%20@output%20Pstring%7D%20output%20The%20GDP%20Log%20name%20with%20a%20random%20suffix.%0A%20*%20%20@author%20Christopher%20Brooks%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogRead.xml%2075037%202016-08-11%2021%3A29%3A55Z%20cxh%20%24%24%0A%20*/%0Aexports.setup%20%3D%20function%28%29%20%7B%0A%20%20%20%20this.input%28%27trigger%27%29%3B%0A%20%20%20%20this.output%28%27output%27%2C%20%7B%27type%27%3A%27string%27%7D%29%3B%0A%7D%3B%0A%0Aexports.fire%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20logName%20%3D%20%22ptolemy.actor.lib.jjs.modules.gdp.test.auto.GDPLogSubscribeJS.%22%20+%20Math.random%28%29%3B%0A%20%20%20%20console.log%28%22JavaScriptGDPLogName%3A%20%22%20+%20logName%29%3B%0A%20%20%20%20this.send%28%27output%27%2C%20logName%29%3B%0A%7D%3B%0A'));

    // Start: TestSpontaneousOnce: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: TestSpontaneousOnce: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var TestSpontaneousOnce = this.instantiateFromCode('TestSpontaneousOnce', unescape('//%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once.%0A//%0A//%20Copyright%20%28c%29%202016-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A%0A/**%20Test%20accessor%20that%20spontaneously%20produces%20outputs%20once%20per%20time%20interval.%0A%20*%20%20This%20implementation%20produces%20a%20counting%20sequence.%0A%20*%0A%20*%20%20@accessor%20test/TestSpontaneousOnce%0A%20*%20%20@parameter%20delay%20The%20delay%20in%20milliseconds%20before%20the%20value%20is%20outputk.%0A%20*%20%20@parameter%20value%20The%20value%20to%20be%20output%20after%20the%20delay.%0A%20*%20%20@output%20output%20The%20output%20port%0A%20*%20%20@author%20Christopher%20Brooks%20and%20Edward%20A.%20Lee.%20Based%20on%20TestSpontaneous%20by%20Edward%20A.%20Lee%0A%20*%20%20@version%20%24%24Id%3A%20TestSpontaneousOnce.js%201659%202017-05-09%2014%3A26%3A57Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20clearTimeout%2C%20console%2C%20error%2C%20exports%2C%20require%2C%20setTimeout%20*/%0A/*jshint%20globalstrict%3A%20true*/%0A%22use%20strict%22%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.parameter%28%27delay%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27number%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%201000%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27value%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27value%27%3A%20true%0A%20%20%20%20%7D%29%3B%20%0A%20%20%20%20this.output%28%27output%27%29%3B%0A%7D%3B%0A%0A//%20These%20variables%20will%20not%20be%20visible%20to%20subclasses.%0Avar%20handle%20%3D%20null%3B%0A%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//%20Need%20to%20record%20%27this%27%20for%20use%20in%20the%20callback.%0A%20%20%20%20var%20thiz%20%3D%20this%3B%0A%20%20%20%20handle%20%3D%20setTimeout%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20thiz.send%28%27output%27%2C%20thiz.getParameter%28%27value%27%29%29%3B%0A%20%20%20%20%7D%2C%20this.getParameter%28%27delay%27%29%29%3B%0A%7D%3B%0A%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28handle%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28handle%29%3B%0A%20%20%20%20%20%20%20%20handle%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    TestSpontaneousOnce.setParameter('delay', 1000.0);
    TestSpontaneousOnce.setParameter('value', true);

    // Start: GDPLogSubscribe2: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: GDPLogSubscribe2: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var GDPLogSubscribe2 = this.instantiateFromCode('GDPLogSubscribe2', unescape('/*%20Subscribe%20to%20a%20log.%20*/%0A%0A//%20Copyright%20%28c%29%202015-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Subscribe%20to%20a%20Global%20Data%20Plane%20%28GDP%29%20log.%0A%20*%0A%20*%20%20FIXME%3A%20What%20is%20the%20meaning%20of%20the%20startrec%20and%20numrec%20arguments%3F%20Makes%20no%20sense%20for%20subscription.%0A%20*%0A%20*%20%20@output%20%7Bstring%7D%20data%20The%20data%20that%20is%20read%20from%20the%20log.%0A%20*%0A%20*%20%20@input%20%7Bstring%7D%20logname%20The%20GDP%20logname.%20%20By%20convention%2C%20a%20log%20name%20should%20be%0A%20*%20%20%20a%20reverse%20fully%20qualified%20name%20like%20%22org.terraswarm.accessor.demo.MyDemoName%22.%0A%20*%20%20%20If%20this%20input%20is%20an%20empty%20string%2C%20then%20no%20subscription%20will%0A%20*%20%20%20occur%20until%20a%20non-empty%20value%20is%20provided.%0A%20*%20%20%20By%20default%2C%20this%20is%20empty.%0A%20*%20%20%20Providing%20an%20empty%20string%20will%20unsubscribe%20from%20any%20previously%20subscribed-to%20log.%0A%20*%20%20%20See%20the%20%5BGDP%20Infrastructure%20wiki%5B%28https%3A//gdp.cs.berkeley.edu/redmine/projects/gdp-sensor-and-actuator-deployments/wiki/Berkeley_Sensor_Deployments%29%0A%20*%20%20%20for%20a%20list%20of%20GDP%20logs.%0A%20*%20%20@input%20%7Bstring%7D%20logdname%20The%20name%20of%20a%20logd%20server.%20%20If%20empty%2C%0A%20*%20%20%20then%20the%20hostname%20of%20the%20local%20machine%20is%20used.%20This%20server%20is%0A%20*%20%20%20a%20gateway%20into%20the%20GDP.%0A%20*%20%20%20FIXME%3A%20Shouldn%27t%20this%20be%20a%20parameter%20rather%20than%20input%3F%0A%20*%0A%20*%20%20@input%20%7Bint%7D%20numrec%20The%20number%20of%20records%20to%20read.%0A%20*%0A%20*%20%20@input%20%7Bint%7D%20startrec%20The%20record%20number%20to%20be%20read.%20%20In%20the%20GDP%2C%0A%20*%20%20the%20first%20record%20is%20record%201.%0A%20*%0A%20*%20%20@input%20%7Bint%7D%20timeout%20The%20timeout%20in%20milliseconds.%0A%20*%0A%20*%20%20@parameter%20%7Bstring%7D%20debugLevel%20The%20value%20of%20the%20GDP%20debug%20flag.%0A%20*%20%20See%20gdp/README-developers.md%20for%20a%20complete%20summary.%20%20The%20value%20is%0A%20*%20%20typically%20%22pattern%3Dlevel%22%2C%20for%20example%20%22gdplogd.physlog%3D39%22.%20%20To%0A%20*%20%20see%20the%20patterns%2C%20use%20the%20%22what%22%20command%20or%20strings%0A%20*%20%20%24PTII/lib/libgdp*%20%7C%20grep%20%27@%28%23%29%27.%20%20Use%20%22*%3D40%22%20to%20set%20the%20debug%0A%20*%20%20level%20to%2040%20for%20all%20components.%20The%20value%20of%20level%20is%20not%20usually%0A%20*%20%20over%20127.%20%20Values%20over%20100%20may%20modify%20the%20behavior.%0A%20*%0A%20*%20%20@accessor%20gdp/GDPLogSubscribe%0A%20*%20%20@author%20Christopher%20Brooks%2C%20Edward%20A.%20Lee%2C%20Nitesh%20Mor%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogSubscribe.js%201986%202017-07-29%2020%3A20%3A40Z%20eal%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20addInputHandler%2C%20console%2C%20exports%2C%20getParameter%2C%20input%2C%20output%2C%20parameter%2C%20removeInputHandler%2C%20require%2C%20send%20*/%0A/*jshint%20globalstrict%3A%20true%20*/%0A%22use%20strict%22%3B%0A%0Avar%20GDP%20%3D%20require%28%27@accessors-modules/gdp%27%29%3B%0Avar%20log%20%3D%20null%3B%0Avar%20handle%20%3D%20null%3B%0Avar%20oldLogname%20%3D%20null%3B%0A%0A//%20If%20getNextData%28%29%20returns%20null%20data%2C%20then%20set%20sawNull%20to%20true.%0Avar%20sawNull%20%3D%20false%3B%0A%0A/**%20Setup%20the%20parameters%20and%20ports.%20*/%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this.output%28%27data%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27debugLevel%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logdname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27edu.berkeley.eecs.gdp-01.gdplogd%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27numrec%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27int%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27startrec%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27int%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27timeout%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27int%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%200%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A/**%20Add%20an%20input%20handler%20that%20will%20subscribe%20to%20a%20log.%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20//%20Set%20an%20input%20handler%20to%20unsubscribe%20and%20then%20invoke%20this%20initialize%28%29%0A%20%20%20%20//%20function%20when%20a%20new%20logname%20is%20provided.%0A%20%20%20%20this.addInputHandler%28%27logname%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20//%20If%20there%20is%20an%20open%20subscription%2C%20close%20it.%0A%20%20%20%20%20%20%20%20self.exports.wrapup.call%28self%29%3B%0A%20%20%20%20%20%20%20%20//%20Open%20the%20new%20subscription.%0A%20%20%20%20%20%20%20%20self.exports.subscribe.call%28self%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20self.exports.subscribe.call%28self%29%3B%0A%7D%3B%0A%0A/**%20If%20a%20non-empty%20logname%20is%20given%2C%20subscribe%20to%20the%20log.%20*/%0Aexports.subscribe%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%2C%0A%20%20%20%20%20%20%20%20logname%20%3D%20this.get%28%27logname%27%29%2C%0A%20%20%20%20%20%20%20%20logdname%20%3D%20this.get%28%27logdname%27%29%3B%0A%0A%20%20%20%20if%20%28logname%20%3D%3D%3D%20%27%27%29%20%7B%0A%20%20%20%20%20%20%20%20//%20Nothing%20more%20to%20do.%0A%20%20%20%20%20%20%20%20//%20ptolemy/actor/lib/jjs/modules/gdp/test/auto/GDPLogSubscribe.xml%20and%0A%20%20%20%20%20%20%20%20//%20ptolemy/actor/lib/jjs/modules/gdp/test/auto/GDPLogSubscribeJS.xml%0A%20%20%20%20%20%20%20%20//%20both%20end%20up%20calling%20subscribe%28%29%20with%20an%20empty%20log%20name%0A%20%20%20%20%20%20%20%20//%20during%20start%20up.%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20//%20Create%20or%20connect%20to%20a%20log.%0A%20%20%20%20//%20The%20second%20argument%20specifies%20to%20open%20the%20log%20%22read%20only.%22%0A%20%20%20%20log%20%3D%20new%20GDP.GDP%28logname%2C%201%2C%20logdname%29%3B%0A%0A%20%20%20%20//%20Listen%20for%20data%20from%20the%20log.%0A%20%20%20%20log.on%28%27data%27%2C%20function%20%28data%29%20%7B%0A%20%20%20%20%20%20%20%20//%20De-duplicate%20if%20the%20data%20is%20the%20same%20as%20the%20first%20data.%0A%20%20%20%20%20%20%20%20if%20%28%28self.firstData%20%3D%3D%3D%20null%29%20%7C%7C%20%21self.firstData.equals%28data%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27******%20received%3A%20%27%20+%20data%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self.send%28%27data%27%2C%20data%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27******%20sent%20data%3A%20%27%20+%20data%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20Avoid%20performing%20the%20comparison%20again.%0A%20%20%20%20%20%20%20%20%20%20%20%20self.firstData%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20log.setDebugLevel%28this.getParameter%28%27debugLevel%27%29%29%3B%0A%0A%20%20%20%20//%20Subscribe%20to%20the%20log%20so%20that%20%27data%27%20events%20are%20emitted.%0A%20%20%20%20log.subscribe%28%0A%20%20%20%20%20%20%20%20this.getParameter%28%27startrec%27%29%2C%0A%20%20%20%20%20%20%20%20this.getParameter%28%27numrec%27%29%2C%0A%20%20%20%20%20%20%20%20this.getParameter%28%27timeout%27%29%0A%20%20%20%20%29%3B%0A%20%20%20%20%0A%20%20%20%20//%20Produce%20a%20first%20output%20that%20is%20the%20latest%20data.%0A%20%20%20%20//%20Note%20that%20there%20is%20a%20race%20condition%20here%20because%20by%20the%20time%20the%20read%0A%20%20%20%20//%20occurs%2C%20we%20may%20already%20have%20a%20%27data%27%20event%20queued.%20This%20would%20result%0A%20%20%20%20//%20in%20duplicated%20data.%20So%20we%20record%20the%20value%20of%20the%20first%20data%2C%20and%0A%20%20%20%20//%20if%20the%20first%20event%20exactly%20matches%20it%2C%20then%20the%20first%20event%20is%20ignored.%0A%20%20%20%20//%20Note%20that%20if%20there%20is%20nothing%20on%20the%20log%2C%20the%20log.read%28%29%20yields%20a%20404%2C%0A%20%20%20%20//%20not%20found%2C%20error%2C%20so%20we%20surround%20with%20a%20try%20catch.%0A%20%20%20%20self.firstData%20%3D%20null%3B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20self.firstData%20%3D%20log.read%28-1%29%3B%0A%20%20%20%20%20%20%20%20self.send%28%27data%27%2C%20self.firstData%29%3B%0A%20%20%20%20%7D%20catch%28e%29%20%7B%0A%20%20%20%20%20%20%20%20//%20Ignore.%0A%20%20%20%20%7D%0A%7D%3B%0A%0A/**%20Unsubscribe%20to%20the%20log.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28log%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20log.unsubscribe%28%29%3B%0A%20%20%20%20%20%20%20%20//%20The%20GDP%20close%28%29%20method%20has%20a%20significant%20bug%20where%20calling%0A%20%20%20%20%20%20%20%20//%20close%28%29%20twice%20might%20abort%20or%20segfault.%0A%20%20%20%20%20%20%20%20log%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    GDPLogSubscribe2.setParameter('debugLevel', "");
    GDPLogSubscribe2.setDefault('logname', "");
    GDPLogSubscribe2.setDefault('logdname', "edu.berkeley.eecs.gdp-01.gdplogd");
    GDPLogSubscribe2.setParameter('numrec', 0);
    GDPLogSubscribe2.setParameter('startrec', 0);
    GDPLogSubscribe2.setParameter('timeout', 0);

    // Start: GDPLogAppend2: ptolemy/cg/adapter/generic/accessor/adapters/org/terraswarm/accessor/JSAccessor.java
    // The script has local modifications, so it is being emitted.

    // Start: GDPLogAppend2: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/lib/jjs/JavaScript.java
    // FIXME: See instantiate() in accessors/web/hosts/common/commonHost.js
    // We probably need to do something with the bindings.
    var GDPLogAppend2 = this.instantiateFromCode('GDPLogAppend2', unescape('/*%20Append%20to%20a%20Global%20Data%20Plane%20%28GDP%29%20log.%20*/%0A%0A//%20Copyright%20%28c%29%202015-2017%20The%20Regents%20of%20the%20University%20of%20California.%0A//%20All%20rights%20reserved.%0A//%0A//%20Permission%20is%20hereby%20granted%2C%20without%20written%20agreement%20and%20without%0A//%20license%20or%20royalty%20fees%2C%20to%20use%2C%20copy%2C%20modify%2C%20and%20distribute%20this%0A//%20software%20and%20its%20documentation%20for%20any%20purpose%2C%20provided%20that%20the%20above%0A//%20copyright%20notice%20and%20the%20following%20two%20paragraphs%20appear%20in%20all%20copies%0A//%20of%20this%20software.%0A//%0A//%20IN%20NO%20EVENT%20SHALL%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20BE%20LIABLE%20TO%20ANY%20PARTY%0A//%20FOR%20DIRECT%2C%20INDIRECT%2C%20SPECIAL%2C%20INCIDENTAL%2C%20OR%20CONSEQUENTIAL%20DAMAGES%0A//%20ARISING%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%20AND%20ITS%20DOCUMENTATION%2C%20EVEN%20IF%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20HAS%20BEEN%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%0A//%20SUCH%20DAMAGE.%0A//%0A//%20THE%20UNIVERSITY%20OF%20CALIFORNIA%20SPECIFICALLY%20DISCLAIMS%20ANY%20WARRANTIES%2C%0A//%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%0A//%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20THE%20SOFTWARE%0A//%20PROVIDED%20HEREUNDER%20IS%20ON%20AN%20%22AS%20IS%22%20BASIS%2C%20AND%20THE%20UNIVERSITY%20OF%0A//%20CALIFORNIA%20HAS%20NO%20OBLIGATION%20TO%20PROVIDE%20MAINTENANCE%2C%20SUPPORT%2C%20UPDATES%2C%0A//%20ENHANCEMENTS%2C%20OR%20MODIFICATIONS.%0A//%0A%0A/**%20Append%20string%20data%20to%20a%20Global%20Data%20Plane%20%28GDP%29%20log.%0A%20*%20%20If%20a%20log%20with%20the%20specified%20name%20does%20not%20exist%2C%20it%20is%20automatically%0A%20*%20%20created.%0A%20*%0A%20*%20%20@input%20%7Bstring%7D%20data%20The%20data%20to%20be%20written.%0A%20*%0A%20*%20%20@param%20%7Bstring%7D%20logname%20The%20GDP%20logname.%20%20By%20convention%2C%20use%0A%20*%20%20%20a%20reverse%20fully%20qualified%20name%20like%0A%20*%20%20%20%22org.terraswarm.accessors.demo.MyDemoName%22%0A%20*%0A%20*%20%20@param%20%7Bstring%7D%20logdname%20The%20name%20of%20a%20logd%20server.%20%20If%20empty%2C%0A%20*%20%20%20then%20the%20hostname%20of%20the%20local%20machine%20is%20used.%20The%20logd%20server%0A%20*%20%20%20is%20a%20gateway%20into%20the%20GDP.%0A%20*%0A%20*%20%20@parameter%20%7Bstring%7D%20debugLevel%20The%20value%20of%20the%20GDP%20debug%20flag.%0A%20*%20%20%20See%20gdp/README-developers.md%20for%20a%20complete%20summary.%20%20The%20value%20is%0A%20*%20%20%20typically%20%22pattern%3Dlevel%22%2C%20for%20example%20%22gdplogd.physlog%3D39%22.%20%20To%0A%20*%20%20%20see%20the%20patterns%2C%20use%20the%20%22what%22%20command%20or%20strings%0A%20*%20%20%20%24PTII/lib/libgdp*%20%7C%20grep%20%27@%28%23%29%27.%20%20Use%20%22*%3D40%22%20to%20set%20the%20debug%0A%20*%20%20%20level%20to%2040%20for%20all%20components.%20The%20value%20of%20level%20is%20not%20usually%0A%20*%20%20%20over%20127.%20%20Values%20over%20100%20may%20modify%20the%20behavior.%0A%20*%0A%20*%20%20@accessor%20gdp/GDPLogAppend%0A%20*%20%20@author%20Christopher%20Brooks%2C%20Edward%20A.%20Lee%2C%20Nitesh%20Mor%0A%20*%20%20@version%20%24%24Id%3A%20GDPLogAppend.js%201597%202017-04-29%2015%3A41%3A50Z%20cxh%20%24%24%0A%20*/%0A%0A//%20Stop%20extra%20messages%20from%20jslint.%20%20Note%20that%20there%20should%20be%20no%0A//%20space%20between%20the%20/%20and%20the%20*%20and%20global.%0A/*globals%20addInputHandler%2C%20addInputParameter%2C%20console%2C%20exports%2C%20get%2C%20getParameter%2C%20input%2C%20parameter%2C%20removeInputHandler%2C%20require%20*/%0A/*jshint%20globalstrict%3A%20true%20*/%0A%22use%20strict%22%3B%0A%0Avar%20GDP%20%3D%20require%28%27@accessors-modules/gdp%27%29%3B%0Avar%20handle%20%3D%20null%3B%0Avar%20log%20%3D%20null%3B%0Avar%20oldLogname%20%3D%20null%3B%0A%0Aexports.setup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20//console.log%28%22GDPLogAppend.js%3A%20setup%28%29%22%29%3B%0A%20%20%20%20this.input%28%27data%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27org.terraswarm.accessors.myLog%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.input%28%27logdname%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%2C%0A%20%20%20%20%20%20%20%20%27value%27%3A%20%27edu.berkeley.eecs.gdp-01.gdplogd%27%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20this.parameter%28%27debugLevel%27%2C%20%7B%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27string%27%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A/**%20Append%20data%20from%20the%20input%20port%20%27data%27%20to%20the%20log.%0A%20*%20%20If%20necessary%2C%20first%20create%20the%20log.%0A%20*/%0Aexports.append%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20logname%20%3D%20this.get%28%27logname%27%29%2C%0A%20%20%20%20%20%20%20%20logdname%2C%20dataValues%3B%0A%20%20%20%20if%20%28logname%20%3D%3D%3D%20%27%27%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20logname%20parameter%20cannot%20be%20empty.%27%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20console.log%28%27Append%20to%20log%20named%3A%20%27%20+%20logname%29%3B%0A%20%20%20%20if%20%28logname%20%21%3D%3D%20oldLogname%29%20%7B%0A%20%20%20%20%20%20%20%20logdname%20%3D%20this.get%28%27logdname%27%29%3B%0A%20%20%20%20%20%20%20%20log%20%3D%20new%20GDP.GDP%28logname%2C%202%2C%20logdname%29%3B%0A%20%20%20%20%20%20%20%20log.setDebugLevel%28this.getParameter%28%27debugLevel%27%29%29%3B%0A%20%20%20%20%20%20%20%20oldLogname%20%3D%20logname%3B%0A%20%20%20%20%7D%0A%20%20%20%20dataValues%20%3D%20this.get%28%27data%27%29%3B%0A%20%20%20%20console.log%28%27Append%20data%3A%20%27%20+%20dataValues%29%3B%0A%20%20%20%20log.append%28dataValues%29%3B%0A%7D%3B%0A%0A/**%20Add%20an%20input%20handler%20that%20will%20append%20data.%20*/%0Aexports.initialize%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20console.log%28%22GDPLogAppend.js%3A%20initialize%28%29%22%29%3B%0A%20%20%20%20oldLogname%20%3D%20null%3B%0A%20%20%20%20handle%20%3D%20this.addInputHandler%28%27data%27%2C%20this.exports.append.bind%28this%29%29%3B%0A%7D%3B%0A%0A/**%20Remove%20the%20input%20handler.%20*/%0Aexports.wrapup%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20if%20%28log%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20log.close%28%29%3B%0A%20%20%20%20%20%20%20%20//%20The%20GDP%20close%28%29%20method%20has%20a%20significant%20bug%20where%20calling%0A%20%20%20%20%20%20%20%20//%20close%28%29%20twice%20might%20abort%20or%20segfault.%0A%20%20%20%20%20%20%20%20log%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28handle%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20this.removeInputHandler%28handle%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A'));
    GDPLogAppend2.setDefault('logname', "org.terraswarm.accessors.myLog");
    GDPLogAppend2.setDefault('logdname', "edu.berkeley.eecs.gdp-01.gdplogd");
    GDPLogAppend2.setParameter('debugLevel', "");

    // Connections: GDPLogSubscribeJS: ptolemy/cg/adapter/generic/accessor/adapters/ptolemy/actor/TypedCompositeActor.java
    this.connect(GDPLogSubscribe2, 'data', TrainableTest2, 'input');
    this.connect(GDPLogCreate, 'output', GDPLogRead, 'logname');
    this.connect(TestSpontaneous2, 'output', GDPLogRead, 'trigger');
    this.connect(JavaScriptRamp2, 'output', GDPLogRead, 'recno');
    this.connect(JavaScriptGDPLogName, 'output', GDPLogCreate, 'logname');
    this.connect(JavaScriptGDPLogName, 'output', GDPLogCreate, 'trigger');
    this.connect(TestSpontaneous, 'output', JavaScriptRamp, 'trigger');
    this.connect(TestSpontaneous2, 'output', JavaScriptRamp2, 'trigger');
    this.connect(GDPLogRead, 'data', TrainableTest, 'input');
    this.connect(TestSpontaneousOnce, 'output', JavaScriptGDPLogName, 'trigger');
    this.connect(GDPLogCreate, 'output', GDPLogSubscribe2, 'logname');
    this.connect(GDPLogCreate, 'output', GDPLogAppend2, 'logname');
    this.connect(JavaScriptRamp, 'output', GDPLogAppend2, 'data');
};

// To update the initialize code below, modify
//   $PTII/ptolemy/cg/kernel/generic/accessor/AccessorCodeGenerator.java
if (exports.initialize) {
    var originalInitialize = exports.initialize;
    exports.initialize = function() {
        originalInitialize.call(this);
        this.stopAt(8000.0);
    }
} else {
    exports.initialize = function() {
        this.stopAt(8000.0);
    }
}
